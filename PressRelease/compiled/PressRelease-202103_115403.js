if (typeof(_T) == 'undefined') { _T={};}
_T["94f8f6e16cd2b597dd86bc97eb494947"]="Edit Press Release";
_T["a9566bada1b13383b04743e2afb17729"]="Contents";
_T["3fbbd723e360d75b3cadb243ede5fd6c"]="Error";
_T["913c44e8f01618cc9d6ea2e85459002a"]="Please correct the errors in red";
_T["7921d6e9293a3c2f642b898d34f342c2"]="Release Details";
_T["7a9199b40ac31f6f2b3737b62f3a159a"]="Draft";
_T["57e6adadd31335be6face97336006e91"]="Ready to Distribute";
_T["d355066e511a5e7aed4ab12e6f6e92c3"]="Distributed";
_T["04dfd45a9f3c81ce058c9acb90085060"]="Select Client";
_T["e615dca2da5c70bfd247783b5595925f"]="Searching...";
_T["ec9a9bc99ffe5d81f040177472335842"]="Company Details";
_T["d2a41fa7754b64b9e8f172c79760f74d"]="Select the client first";
_T["35270abee43385e64e6d323e6263260d"]="Select Person";
_T["ff35d0f35e4941cd4ef11ffcfc4315bb"]="name";
_T["e9f6e35e89802a5abd3edc4f6bda8eda"]="id";
_T["a9a1897bacfd84601d1544d3db31136d"]="type";
_T["0f5fb59163f9d8976c2be5634f57b326"]="int";
_T["4adda56db534f9b74a924003808812a3"]="string";
_T["de5564d58d1b86112580b5d623206fde"]="Name and Email";
_T["e1ec66453f09e4536ea51e720f9a9e24"]="Name (email is link on our site)";
_T["0d19a0095546423b9cf64aa7bd124f4c"]="Name Only";
_T["fd57ca4f666fd5c2b4e32814bd4a70dc"]="Sending";
_T["5dce890ec8a5d8b38b5a562cf37abd24"]="Financial Data";
_T["ad472f752938345d00b2d3e0a1dcfb13"]="Upload Failed";
_T["e011724ff5d9246a1c4d47b5e795b878"]="Save Press Release First";
_T["4a192a6c3e83c0074ceb1dcc90040959"]="Images / PDF";
_T["e16fd5cb9f059764f1c6fc25278674cb"]="Add From Image Store";
_T["d29dfaa2afb866c3cd10de844a8dac93"]="Select Image";
_T["c69f794304daa24af7d4f56a7b2a96a2"]="Select Images";
_T["060cfc60d63f1f333d4242787f442d99"]="Select a company first";
_T["daf74af5b9f6345d8bdb57c9988b2289"]="Save press release first";
_T["861bd0bd5a0665f84a3efacb87a9e4c9"]="filename";
_T["105aaa39cf6d0d73b6e6efd1201002f0"]="Select an Image";
_T["42ebce0c2ee76d20878ce7b7f35d59b3"]="Error deleting image";
_T["8462cfa01d6a20b5596db43b5a1c8911"]="Delete Selected File or  Image";
_T["2ba3fba33421853e25813b236644a9b7"]="pressrelease_entry";
_T["24387c7b2865c89e6950da30bd41aca7"]="Correct All the errors in Red";
_T["623ba736d9f334f43f05e32a287cdcc6"]="Problem sending to server";
_T["d4ddf25bdf42d24705e5da2d1aced69e"]="Saving";
_T["f3f0675937db6122a7bab05a282c4e54"]="Update Image Details";
_T["146e39adf5733982b394c16f71d96a48"]="Cancel";
_T["fe718e1ebf8adc7d016d7ff733296320"]="submit";
_T["5c1d5518211974c8447a38503db18739"]="Save";

_T["e3f73516a11b5fd15f18d4bd74b23a30"]="Edit Image Details";
_T["b72b8d653936bd294f1c112df2ba657c"]="Cancel";
_T["022f847bcb8d9f05c33afa850bb96efd"]="OK";
_T["6c71e00c1e6226f31d6add04316e1942"]="Saving";
_T["22446320a9f49f202ec567ee6c3abc55"]="submit";

_T["2fad5624b2c220076adfc0d7621fc87d"]="Company List";
_T["4888e81fff0e8fec50e695b385433130"]="Companies";

_T["882d3af136207fdcc9c3828c28d43d61"]="Press Releases";
_T["97b0d3f09fec9e59a34c5f83f69a72c2"]="Add";
_T["6836a1c0c8926e420d5055d535093141"]="Error";
_T["b584d87a9686827e406637319e3ba5b0"]="Select only one Row";
_T["07d72f1deeff78a4581d7c618b01033b"]="Select a Row";
_T["1387df571211c89a915018ac3e733177"]="Edit";

_T["5a937fa4cdb12621d75fbfd9c1f98cd9"]="Image List";
_T["6123ad9dc9a4a83978f40e369098fe93"]="Images";
_T["50dea3784491bf900415dc0cb48cfa56"]="Add";
_T["26ad1f9420df99d50abfccd20bde4523"]="Error";
_T["c1ebc05528786477caa746b8969ac7b7"]="Select a single image to edit";
_T["e50f23f4c186e2883a1793dc4ac1aa7b"]="Edit";
_T["f98ca9b05bf7c48a32dbdc3b631db8e0"]="Delete";

_T["0171f490ee4f0845462c2ef7fe7d282d"]="Press Release Tab";
_T["518c51a07de566914661f27461de9bc7"]="Press Releases";

Pman.Dialog.PressReleaseEdit={dialog:false,callback:false,show:function(A,cb){if(!this.dialog){this.create();}
this.callback=cb;this.data=A;this.dialog.show(this.data._el);if(this.form){this.form.reset();this.form.setValues(A);this.form.fireEvent('actioncomplete',this.form,{type:'setdata',data:A});}},create:function(){var A=this;this.dialog=Roo.factory({xtype:'LayoutDialog',xns:Roo,closable:false,collapsible:false,height:550,modal:true,resizable:false,title:_T["94f8f6e16cd2b597dd86bc97eb494947"],width:800,items:[{xtype:'ContentPanel',xns:Roo,region:'center',title:_T["a9566bada1b13383b04743e2afb17729"],items:[{xtype:'Form',xns:Roo.form,listeners:{actioncomplete:function(B,C){if(C.failureType){A.dialog.el.unmask();Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["913c44e8f01618cc9d6ea2e85459002a"]);return;}if(C.type=='setdata'){A.loaded=false;A.dialog.getLayout().showPanel(0);A.form.addForm(A.form2);A.form.addForm(A.form3);if(A.data.id){this.load({method:'GET',params:{'_id':A.data.id}});}else {A.loaded=true;A.form.findField('publish_status').setValue(-1);}return;}if(C.type=='load'){A.loaded=true;A.dialog.el.unmask();return;}if(C.type=='submit'){A.dialog.el.unmask();A.dialog.hide();if(A.callback){A.callback.call(A,A.form.getValues());}
A.form.reset();return;}},rendered:function(B){A.form=B;},actionfailed:function(B,C){if(C.failureType){A.dialog.el.unmask();Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["913c44e8f01618cc9d6ea2e85459002a"]);return;}}},method:'POST',style:'margin: 10px;',url:baseURL+'/Roo/pressrelease_entry.php',items:[{xtype:'FieldSet',xns:Roo.form,labelWidth:75,legend:_T["7921d6e9293a3c2f642b898d34f342c2"],items:[{xtype:'Row',xns:Roo.form,labelWidth:75,items:[{xtype:'ComboBox',xns:Roo.form,allowBlank:false,displayField:'fname',editable:false,fieldLabel:'Status',hiddenName:'publish_status',listWidth:200,mode:'local',name:'publish_status_name',triggerAction:'all',valueField:'ftype',width:200,store:{xtype:'SimpleStore',xns:Roo.data,data:[[-1,_T["7a9199b40ac31f6f2b3737b62f3a159a"]],[0,_T["57e6adadd31335be6face97336006e91"]],[1,_T["d355066e511a5e7aed4ab12e6f6e92c3"]]],fields:['ftype','fname']}},{xtype:'ComboBox',xns:Roo.form,displayField:'name',editable:'false',emptyText:_T["04dfd45a9f3c81ce058c9acb90085060"],fieldLabel:'Client',forceSelection:true,hiddenName:'client_id',listWidth:400,loadingText:_T["e615dca2da5c70bfd247783b5595925f"],minChars:2,name:'client_id_name',pageSize:20,qtip:_T["04dfd45a9f3c81ce058c9acb90085060"],selectOnFocus:true,tpl:'<div class="x-grid-cell-text x-btn button"><b>{name}</b> </div>',triggerAction:'all',typeAhead:true,valueField:'id',width:300,allowBlank:true,store:{xtype:'Store',xns:Roo.data,listeners:{beforeload:function(B,o){o.params=o.params||{};}},proxy:{xtype:'HttpProxy',xns:Roo.data,method:'GET',url:baseURL+'/Roo/Companies.php'},reader:{xtype:'JsonReader',xns:Roo.data,totalProperty:'total',root:'data',id:'id',fields:[{'name':'code','type':'string'},{'name':'name','type':'string'},{'name':'remarks','type':'string'},{'name':'owner_id','type':'int'},{'name':'address','type':'string'},{'name':'tel','type':'string'},{'name':'fax','type':'string'},{'name':'email','type':'string'},{'name':'id','type':'int'},{'name':'isOwner','type':'int'},{'name':'logo_id','type':'int'},{'name':'background_color','type':'string'},{'name':'comptype','type':'string'},{'name':'ava_craft','type':'string'},{'name':'url','type':'string'},{'name':'main_office_id','type':'int'},{'name':'created_by','type':'int'},{'name':'created_dt','type':'string'},{'name':'updated_by','type':'int'},{'name':'updated_dt','type':'string'},{'name':'passwd','type':'string'}]}}}]},{xtype:'Row',xns:Roo.form,labelWidth:75,items:[{xtype:'ComboBox',xns:Roo.form,allowBlank:false,displayField:'title',editable:false,fieldLabel:'Language',hiddenName:'language',listWidth:200,mode:'local',name:'language_name',tpl:'<div class="x-grid-cell-text x-btn button"><b>{title}</b> </div>',triggerAction:'all',valueField:'code',width:200,store:{xtype:'SimpleStore',xns:Roo.data,data:(function(){return typeof(Pman)=='object'?Pman.I18n.simpleStoreData('l'):[]})(),fields:['code','title']}},{xtype:'ComboBox',xns:Roo.form,allowBlank:false,displayField:'title',editable:false,fieldLabel:'Country',hiddenName:'country',listWidth:200,mode:'local',name:'country_name',tpl:'<div class="x-grid-cell-text x-btn button"><b>{title}</b> </div>',triggerAction:'all',valueField:'code',width:200,store:{xtype:'SimpleStore',xns:Roo.data,data:(function(){return typeof(Pman)=='object'?Pman.I18n.simpleStoreData('c'):[]})(),fields:['code','title']}}]},{xtype:'Row',xns:Roo.form,labelWidth:75,width:730,items:[{xtype:'DateField',xns:Roo.form,allowBlank:true,fieldLabel:'Publish',format:'Y-m-d',name:'publish_dt_day',width:100},{xtype:'ComboBox',xns:Roo.form,allowBlank:false,displayField:'hr',editable:false,fieldLabel:'Time',listWidth:80,mode:'local',name:'publish_dt_hr',triggerAction:'all',valueField:'hr',width:60,store:{xtype:'SimpleStore',xns:Roo.data,data:(function(){var r=[];for(var i=0;i<24;i++){r.push([i+':00']);r.push([i+':30']);}return r;})(),fields:['hr']}},{xtype:'ComboBox',xns:Roo.form,allowBlank:false,displayField:'fname',editable:false,fieldLabel:'Timezone',hiddenName:'publish_dt_tz',listWidth:500,mode:'local',name:'publish_dt_tz_name',triggerAction:'all',valueField:'ftype',width:280,store:{xtype:'SimpleStore',xns:Roo.data,data:[['-12.00','(GMT -12:00) Eniwetok, Kwajalein'],['-11.00','(GMT -11:00) Midway Island, Samoa'],['-10.00','(GMT -10:00) Hawaii'],['-9.00','(GMT -9:00) Alaska'],['-8.00','(GMT -8:00) Pacific Time (US & Canada)'],['-7.00','(GMT -7:00) Mountain Time (US & Canada)'],['-6.00','(GMT -6:00) Central Time (US & Canada), Mexico City'],['-5.00','(GMT -5:00) Eastern Time (US & Canada), Bogota, Lima'],['-4.00','(GMT -4:00) Atlantic Time (Canada), Caracas, La Paz'],['-3.50','(GMT -3:30) Newfoundland'],['-3.00','(GMT -3:00) Brazil, Buenos Aires, Georgetown'],['-2.00','(GMT -2:00) Mid-Atlantic'],['-1.00','(GMT -1:00 hour) Azores, Cape Verde Islands'],['0.00','(GMT) Western Europe Time, London, Lisbon, Casablanca'],['1.00','(GMT +1:00 hour) Brussels, Copenhagen, Madrid, Paris'],['2.00','(GMT +2:00) Kaliningrad, South Africa'],['3.00','(GMT +3:00) Baghdad, Riyadh, Moscow, St. Petersburg'],['3.30','(GMT +3:30) Tehran'],['4.00','(GMT +4:00) Abu Dhabi, Muscat, Baku, Tbilisi'],['4.50','(GMT +4:30) Kabul'],['5.00','(GMT +5:00) Ekaterinburg, Islamabad, Karachi, Tashkent'],['5.30','(GMT +5:30) Bombay, Calcutta, Madras, New Delhi'],['5.45','(GMT +5:45) Kathmandu'],['6.00','(GMT +6:00) Almaty, Dhaka, Colombo'],['7.00','(GMT +7:00) Bangkok, Hanoi, Jakarta'],['8.00','(GMT +8:00) Beijing, Perth, Singapore, Hong Kong'],['9.00','(GMT +9:00) Tokyo, Seoul, Osaka, Sapporo, Yakutsk'],['9.30','(GMT +9:30) Adelaide, Darwin'],['10.00','(GMT +10:00) Eastern Australia, Guam, Vladivostok'],['11.00','(GMT +11:00) Magadan, Solomon Islands, New Caledonia'],['12.00','(GMT +12:00) Auckland, Wellington, Fiji, Kamchatka']],fields:['ftype','fname']}}]}]},{xtype:'TextField',xns:Roo.form,allowBlank:false,fieldLabel:'Headline',name:'headline',width:650},{xtype:'TextField',xns:Roo.form,fieldLabel:'Sub-Headline',name:'subheadline',width:650},{xtype:'Row',xns:Roo.form,labelAlign:'top',items:[{xtype:'HtmlEditor',xns:Roo.form,listeners:{sync:function(B,C){Roo.log('sync');var D=this.fieldEl.query('label')[0];var it=this.doc.body.innerText;var n=Math.max(0,it.replace(/^\s+/,'').replace(/\s+$/,'').split(/\s+/).length);D.innerHTML='Content: ('+n+' Words)';}},allowBlank:false,fieldLabel:'Content',height:230,name:'content',width:750}]},{xtype:'Hidden',xns:Roo.form,name:'id'}]}]},{xtype:'ContentPanel',xns:Roo,background:true,region:'center',title:_T["ec9a9bc99ffe5d81f040177472335842"],items:[{xtype:'Form',xns:Roo.form,listeners:{rendered:function(B){A.form2=B;}},labelWidth:80,method:'POST',style:'margin:10px;',url:baseURL+'/Roo/Companies.php',items:[{xtype:'Row',xns:Roo.form,labelWidth:80,items:[{xtype:'TextField',xns:Roo.form,fieldLabel:'Stock Code',name:'stockcode',width:100},{xtype:'Row',xns:Roo.form,labelWidth:110,items:[{xtype:'TextField',xns:Roo.form,fieldLabel:' (Chinese) Name',name:'company_name_alt',width:150},{xtype:'Row',xns:Roo.form,labelWidth:65,items:[{xtype:'TextField',xns:Roo.form,fieldLabel:'Industry',name:'industry',width:150}]}]}]},{xtype:'Row',xns:Roo.form,items:[{xtype:'ComboBox',xns:Roo.form,listeners:{add:function(B){if(!A.form.findField('client_id').getValue()){Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["d2a41fa7754b64b9e8f172c79760f74d"]);return;}
Pman.Dialog.PersonNew.show({},function(s){if(s){B.setValue(s.id);B.el.dom.value=s.name;}});}},allowBlank:'false',displayField:'name',editable:'false',fieldLabel:'Contact 1',forceSelection:true,hiddenName:'contact1_id',listWidth:400,loadingText:_T["e615dca2da5c70bfd247783b5595925f"],minChars:2,name:'contact1_id_name',pageSize:20,qtip:_T["35270abee43385e64e6d323e6263260d"],queryParam:'_psel',selectOnFocus:true,tpl:'<div class="x-grid-cell-text x-btn button"><b>{name}</b> </div>',triggerAction:'all',typeAhead:true,valueField:'id',width:300,store:{xtype:'Store',xns:Roo.data,listeners:{beforeload:function(B,o){o.params=o.params||{};var C=A.form.findField('client_id').getValue();if(!C){Roo.MessageBox.alert('Error','Select a company first');return false;}
o.params['query[comptype_or_company_id']='AGENCY,'+C;}},remoteSort:true,sortInfo:{direction:'ASC',field:'id'},proxy:{xtype:'HttpProxy',xns:Roo.data,method:'GET',url:baseURL+'/Roo/Person.php'},reader:{xtype:'JsonReader',xns:Roo.data,id:'id',root:'data',totalProperty:'total',fields:[{_T["ff35d0f35e4941cd4ef11ffcfc4315bb"]:_T["e9f6e35e89802a5abd3edc4f6bda8eda"],_T["a9a1897bacfd84601d1544d3db31136d"]:_T["0f5fb59163f9d8976c2be5634f57b326"]},{_T["ff35d0f35e4941cd4ef11ffcfc4315bb"]:_T["ff35d0f35e4941cd4ef11ffcfc4315bb"],_T["a9a1897bacfd84601d1544d3db31136d"]:_T["4adda56db534f9b74a924003808812a3"]}]}}},{xtype:'ComboBox',xns:Roo.form,allowBlank:false,displayField:'fname',editable:false,fieldLabel:'Show as',hiddenName:'contact1_showtype',listWidth:200,mode:'local',name:'contact1_showtype_name',triggerAction:'all',value:0,valueField:'ftype',width:200,store:{xtype:'SimpleStore',xns:Roo.data,data:[[0,_T["de5564d58d1b86112580b5d623206fde"]],[1,_T["e1ec66453f09e4536ea51e720f9a9e24"]],[2,_T["0d19a0095546423b9cf64aa7bd124f4c"]]],fields:['ftype','fname']}}]},{xtype:'Row',xns:Roo.form,items:[{xtype:'ComboBox',xns:Roo.form,listeners:{add:function(B){if(!A.form.findField('client_id').getValue()){Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["d2a41fa7754b64b9e8f172c79760f74d"]);return;}
Pman.Dialog.PersonNew.show({},function(s){if(s){B.setValue(s.id);B.el.dom.value=s.name;}});}},allowBlank:'false',displayField:'name',editable:'false',fieldLabel:'Contact 2',forceSelection:true,hiddenName:'contact2_id',listWidth:400,loadingText:_T["e615dca2da5c70bfd247783b5595925f"],minChars:2,name:'contact2_id_name',pageSize:20,qtip:_T["35270abee43385e64e6d323e6263260d"],queryParam:'_psel',selectOnFocus:true,tpl:'<div class="x-grid-cell-text x-btn button"><b>{name}</b> </div>',triggerAction:'all',typeAhead:true,valueField:'id',width:300,store:{xtype:'Store',xns:Roo.data,listeners:{beforeload:function(B,o){o.params=o.params||{};var C=A.form.findField('client_id').getValue();if(!C){Roo.MessageBox.alert('Error','Select a company first');return false;}
o.params['query[comptype_or_company_id']='AGENCY,'+C;}},remoteSort:true,sortInfo:{direction:'ASC',field:'id'},proxy:{xtype:'HttpProxy',xns:Roo.data,method:'GET',url:baseURL+'/Roo/Person.php'},reader:{xtype:'JsonReader',xns:Roo.data,id:'id',root:'data',totalProperty:'total',fields:[{_T["ff35d0f35e4941cd4ef11ffcfc4315bb"]:_T["e9f6e35e89802a5abd3edc4f6bda8eda"],_T["a9a1897bacfd84601d1544d3db31136d"]:_T["0f5fb59163f9d8976c2be5634f57b326"]},{_T["ff35d0f35e4941cd4ef11ffcfc4315bb"]:_T["ff35d0f35e4941cd4ef11ffcfc4315bb"],_T["a9a1897bacfd84601d1544d3db31136d"]:_T["4adda56db534f9b74a924003808812a3"]}]}}},{xtype:'ComboBox',xns:Roo.form,allowBlank:false,displayField:'fname',editable:false,fieldLabel:'Show as',hiddenName:'contact1_showtype',listWidth:200,mode:'local',name:'contact2_showtype_name',triggerAction:'all',value:0,valueField:'ftype',width:200,store:{xtype:'SimpleStore',xns:Roo.data,data:[[0,_T["de5564d58d1b86112580b5d623206fde"]],[1,_T["e1ec66453f09e4536ea51e720f9a9e24"]],[2,_T["0d19a0095546423b9cf64aa7bd124f4c"]]],fields:['ftype','fname']}}]},{xtype:'Row',xns:Roo.form,items:[{xtype:'ComboBox',xns:Roo.form,listeners:{add:function(B){if(!A.form.findField('client_id').getValue()){Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["d2a41fa7754b64b9e8f172c79760f74d"]);return;}
Pman.Dialog.PersonNew.show({},function(s){if(s){B.setValue(s.id);B.el.dom.value=s.name;}});}},allowBlank:'false',displayField:'name',editable:'false',fieldLabel:'Contact 3',forceSelection:true,hiddenName:'contact3_id',listWidth:400,loadingText:_T["e615dca2da5c70bfd247783b5595925f"],minChars:2,name:'contact3_id_name',pageSize:20,qtip:_T["35270abee43385e64e6d323e6263260d"],queryParam:'_psel',selectOnFocus:true,tpl:'<div class="x-grid-cell-text x-btn button"><b>{name}</b> </div>',triggerAction:'all',typeAhead:true,valueField:'id',width:300,store:{xtype:'Store',xns:Roo.data,listeners:{beforeload:function(B,o){o.params=o.params||{};var C=A.form.findField('client_id').getValue();if(!C){Roo.MessageBox.alert('Error','Select a company first');return false;}
o.params['query[comptype_or_company_id']='AGENCY,'+C;}},remoteSort:true,sortInfo:{direction:'ASC',field:'id'},proxy:{xtype:'HttpProxy',xns:Roo.data,method:'GET',url:baseURL+'/Roo/Person.php'},reader:{xtype:'JsonReader',xns:Roo.data,id:'id',root:'data',totalProperty:'total',fields:[{_T["ff35d0f35e4941cd4ef11ffcfc4315bb"]:_T["e9f6e35e89802a5abd3edc4f6bda8eda"],_T["a9a1897bacfd84601d1544d3db31136d"]:_T["0f5fb59163f9d8976c2be5634f57b326"]},{_T["ff35d0f35e4941cd4ef11ffcfc4315bb"]:_T["ff35d0f35e4941cd4ef11ffcfc4315bb"],_T["a9a1897bacfd84601d1544d3db31136d"]:_T["4adda56db534f9b74a924003808812a3"]}]}}},{xtype:'ComboBox',xns:Roo.form,allowBlank:false,displayField:'fname',editable:false,fieldLabel:'Show as',hiddenName:'contact3_showtype',listWidth:200,mode:'local',name:'contact3_showtype_name',triggerAction:'all',value:0,valueField:'ftype',width:200,store:{xtype:'SimpleStore',xns:Roo.data,data:[[0,_T["de5564d58d1b86112580b5d623206fde"]],[1,_T["e1ec66453f09e4536ea51e720f9a9e24"]],[2,_T["0d19a0095546423b9cf64aa7bd124f4c"]]],fields:['ftype','fname']}}]},{xtype:'Row',xns:Roo.form,labelAlign:'top',items:[{xtype:'TextArea',xns:Roo.form,fieldLabel:'About the Company',height:150,name:'content_about',width:750},{xtype:'TextArea',xns:Roo.form,fieldLabel:'Related Web Links',height:100,name:'content_links',width:750}]}]}]},{xtype:'NestedLayoutPanel',xns:Roo,listeners:{activate:function(B){if(A.hasFinanceWatch){return;}
A.hasFinanceWatch=true;A.financeSending=false;window.setInterval(function(){if(!A.financeForm){return;}var C=A.financeForm.findField('imageUpload').getValue();if(!C||!C.length){return;}if(A.financeSending){return;}
A.financeSending=true;A.financeForm.el.mask(_T["fd57ca4f666fd5c2b4e32814bd4a70dc"]);A.financeForm.submit.defer(100,A.financeForm);},1000)}},region:'center',title:_T["5dce890ec8a5d8b38b5a562cf37abd24"],layout:{xtype:'BorderLayout',xns:Roo,items:[{xtype:'ContentPanel',xns:Roo,fitContainer:true,fitToFrame:true,region:'center',items:[{xtype:'Form',xns:Roo.form,listeners:{rendered:function(B){A.form3=B;}},method:'POST',style:'margin:10px;',url:baseURL+'/Roo/pressrelease_entry.php',items:[{xtype:'Row',xns:Roo.form,labelAlign:'top',items:[{xtype:'TextArea',xns:Roo.form,fieldLabel:'Forward Looking Statement',height:150,name:'content_forward',width:750},{xtype:'TextArea',xns:Roo.form,fieldLabel:'Financial Content',height:200,name:'content_data',style:'font-family: monospace;',width:750}]}]}]},{xtype:'ContentPanel',xns:Roo,region:'south',items:[{xtype:'Form',xns:Roo.form,listeners:{actioncomplete:function(B,C){if(C.failureType){A.financeForm.el.unmask();A.uploadSending=false;Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["ad472f752938345d00b2d3e0a1dcfb13"]);return false;}if(C.type=='submit'){A.financeForm.reset();A.financeSending=false;A.financeForm.el.unmask();A.form2.findField('content_data').setValue(C.result.data);return;}},rendered:function(B){A.financeForm=B;}},fileUpload:true,labelWidth:200,style:'margin: 10px;',url:baseURL+'/PressRelease/ExcelToText.php',items:[{xtype:'Row',xns:Roo.form,items:[{xtype:'TextField',xns:Roo.form,allowBlank:false,fieldLabel:'Upload Excel of Financial data',inputType:'file',name:'imageUpload',width:350}]}]}]}],center:{xtype:'LayoutRegion',xns:Roo},south:{xtype:'LayoutRegion',xns:Roo,height:40}}},{xtype:'NestedLayoutPanel',xns:Roo,listeners:{activate:function(B){A.imagePanel=B;if(A.addFromStore){A.addFromStore.lastQuery='~~~~';}if(!A.loaded){return;}
A.imageView.el.unmask();if(A.data.id){A.imageView.loadImages();}else {A.imageView.el.mask(_T["e011724ff5d9246a1c4d47b5e795b878"]);}if(A.hasUploadWatch){return;}
A.hasUploadWatch=true;A.uploadSending=false;window.setInterval(function(){if(!A.uploadForm){return;}var C=A.uploadForm.findField('imageUpload').getValue();if(!C||!C.length){return;}if(A.uploadSending){return;}
A.uploadSending=true;A.uploadForm.findField('onid').setValue(A.data.id);A.uploadForm.el.mask(_T["fd57ca4f666fd5c2b4e32814bd4a70dc"]);A.uploadForm.submit.defer(100,A.uploadForm);},1000)}},region:'center',title:_T["4a192a6c3e83c0074ceb1dcc90040959"],layout:{xtype:'BorderLayout',xns:Roo,items:[{xtype:'ContentPanel',xns:Roo,autoScroll:true,fitContainer:true,fitToFrame:true,region:'center',items:[{xtype:'JsonView',xns:Roo,listeners:{beforerender:function(B,C){A.imageView=B;if(this.stylesheet){return;}
this.el.addClass('thumb-browser');this.stylesheet=Roo.util.CSS.createStyleSheet({'.thumb-browser .thumb-wrap':{border:'3px solid #EEE','float':'left',height:'190px',margin:'2px','padding-left':'5px','padding-top':'5px',width:'160px'},'.thumb-browser .x-view-selected':{border:'3px solid #333'},'.thumblabel':{font:'normal normal normal 11px/normal tahoma, verdana, helvetica'}},Roo.id());},selectionchange:function(B,C){if(!C||!C.length){A.imagePanel.layout.getRegion('east').hide();return;}
A.imagePanel.layout.getRegion('east').show();A.imageForm.setValues(A.imageView.getNodeData(C[0]));}},jsonRoot:'data',singleSelect:true,loadImages:function(){this.load({url:baseURL+'/Roo/Images.php',method:'GET',params:{ontable:'pressrelease_entry',onid:A.data.id,'query[imagesize]':'150x150','query[imageBaseURL]':rootURL+'/release.php'},text:'Loading'});},tpl:{xtype:'Template',xns:Roo,html:'<div class="thumb-wrap"> '+'<div class="thumb"><img  src="{url}" class="thumb-img"></div>'+'<div class="thumblabel">{title}<br/>{linkurl}</div>'+'</div>'}}],toolbar:{xtype:'Toolbar',xns:Roo,items:[{xtype:'TextItem',xns:Roo.Toolbar,text:_T["e16fd5cb9f059764f1c6fc25278674cb"]},{xtype:'ComboBox',xns:Roo.form,listeners:{render:function(B){A.addFromStore=B;},select:function(B,C,D){new Pman.Request({url:baseURL+'/Roo/Images',method:'POST',params:{ontable:'pressrelease_entry',onid:A.form.findField('id').getValue(),_copy_from:C.data.id},success:function(){A.imageView.loadImages();}});}},editable:false,emptyText:_T["d29dfaa2afb866c3cd10de844a8dac93"],fieldLabel:'Images',forceSelection:true,listWidth:400,loadingText:_T["e615dca2da5c70bfd247783b5595925f"],minChars:2,pageSize:20,qtip:_T["c69f794304daa24af7d4f56a7b2a96a2"],queryParam:'search',selectOnFocus:true,tpl:'<div class="x-grid-cell-text x-btn button"><img src="{url_thumb}" height="150" width="150"><b>{filename}</b> </div>',triggerAction:'all',typeAhead:true,valueField:'id',width:300,store:{xtype:'Store',xns:Roo.data,listeners:{beforeload:function(B,o){o.params=o.params||{};var c=A.form.findField('client_id').getValue();if(!c){Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["060cfc60d63f1f333d4242787f442d99"]);return;}var id=A.form.findField('id').getValue();if(!c){Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["daf74af5b9f6345d8bdb57c9988b2289"]);return;}
o.params.onid=c;o.params.ontable='Companies';o.params['query[imagesize]']='150x150';}},remoteSort:true,sortInfo:{direction:'ASC',field:'id'},proxy:{xtype:'HttpProxy',xns:Roo.data,method:'GET',url:baseURL+'/Roo/Images.php'},reader:{xtype:'JsonReader',xns:Roo.data,id:'id',root:'data',totalProperty:'total',fields:[{_T["ff35d0f35e4941cd4ef11ffcfc4315bb"]:_T["e9f6e35e89802a5abd3edc4f6bda8eda"],_T["a9a1897bacfd84601d1544d3db31136d"]:_T["0f5fb59163f9d8976c2be5634f57b326"]},{_T["ff35d0f35e4941cd4ef11ffcfc4315bb"]:_T["861bd0bd5a0665f84a3efacb87a9e4c9"],_T["a9a1897bacfd84601d1544d3db31136d"]:_T["4adda56db534f9b74a924003808812a3"]}]}}},{xtype:'Fill',xns:Roo.Toolbar},{xtype:'Button',xns:Roo.Toolbar,listeners:{click:function(B,e){if(!A.imageView.getSelectedNodes().length){Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["105aaa39cf6d0d73b6e6efd1201002f0"]);return;}var id=A.imageView.getNodeData(A.imageView.getSelectedNodes()[0]).id;A.imageView.el.mask('Deleting');Roo.Ajax.request({url:baseURL+'/Roo/Images.php',params:{_delete:id},method:'GET',success:function(){A.imageView.loadImages();},failure:function(){A.imageView.el.unmask();Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["42ebce0c2ee76d20878ce7b7f35d59b3"]);return;}});}},text:_T["8462cfa01d6a20b5596db43b5a1c8911"]}]}},{xtype:'ContentPanel',xns:Roo,region:'south',items:[{xtype:'Form',xns:Roo.form,listeners:{actioncomplete:function(B,C){if(C.failureType){A.uploadForm.el.unmask();A.uploadSending=false;Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["ad472f752938345d00b2d3e0a1dcfb13"]);return false;}if(C.type=='submit'){A.uploadForm.reset();A.uploadSending=false;A.uploadForm.el.unmask();A.imageView.loadImages();return;}},rendered:function(B){A.uploadForm=B;},actionfailed:function(B,C){A.uploadForm.el.unmask();A.uploadForm.reset();A.uploadSending=false;Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["ad472f752938345d00b2d3e0a1dcfb13"]);A.imageView.loadImages();}},fileUpload:true,labelWidth:200,style:'margin: 10px;',url:baseURL+'/Roo/Images.php',items:[{xtype:'Row',xns:Roo.form,items:[{xtype:'TextField',xns:Roo.form,allowBlank:false,fieldLabel:'Upload Image or File',inputType:'file',name:'imageUpload',width:250}]},{xtype:'Hidden',xns:Roo.form,name:'onid'},{xtype:'Hidden',xns:Roo.form,name:'ontable',value:_T["2ba3fba33421853e25813b236644a9b7"]}]}]},{xtype:'ContentPanel',xns:Roo,region:'east',items:[{xtype:'Form',xns:Roo.form,listeners:{actioncomplete:function(B,C){if(C.type=='setdata'){return;}if(C.type=='load'){return;}if(C.type=='submit'){A.selectAfterLoad=this.findField('id').getValue();var lr=A.imagePanel.layout.getRegion('east');lr.el.unmask();A.imageView.loadImages();return;}},rendered:function(B){A.imageForm=B;},actionfailed:function(B,C){var lr=A.imagePanel.layout.getRegion('east');lr.el.unmask();if(C.failureType==Roo.form.Action.CLIENT_INVALID){Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["24387c7b2865c89e6950da30bd41aca7"]);return;}
Roo.MessageBox.alert(_T["3fbbd723e360d75b3cadb243ede5fd6c"],_T["623ba736d9f334f43f05e32a287cdcc6"]);}},labelAlign:'top',method:'POST',style:'margin:10px;',url:baseURL+'/Roo/Images.php',items:[{xtype:'TextField',xns:Roo.form,fieldLabel:'Title',name:'title',width:150},{xtype:'TextField',xns:Roo.form,fieldLabel:'Link',name:'linkurl',vtype:'url',width:150},{xtype:'TextField',xns:Roo.form,fieldLabel:'Mimetype',name:'mimetype',width:150,readOnly:true},{xtype:'TextField',xns:Roo.form,fieldLabel:'Width',name:'width',width:75,readOnly:true},{xtype:'TextField',xns:Roo.form,fieldLabel:'Height',name:'height',readOnly:true,width:75},{xtype:'TextField',xns:Roo.form,fieldLabel:'Filesize',name:'filesize',width:75,readOnly:true},{xtype:'Hidden',xns:Roo.form,name:'id'},{xtype:'Button',xns:Roo,listeners:{click:function(B,e){var lr=A.imagePanel.layout.getRegion('east');lr.el.mask(_T["d4ddf25bdf42d24705e5da2d1aced69e"]);A.imageForm.submit();}},text:_T["f3f0675937db6122a7bab05a282c4e54"]}]}]}],center:{xtype:'LayoutRegion',xns:Roo},east:{xtype:'LayoutRegion',xns:Roo,hidden:true,width:200},south:{xtype:'LayoutRegion',xns:Roo,height:60}}}],center:{xtype:'LayoutRegion',xns:Roo,alwaysShowTabs:true,tabPosition:'top'},buttons:[{xtype:'Button',xns:Roo,listeners:{click:function(B,e){A.dialog.hide();}},text:_T["146e39adf5733982b394c16f71d96a48"]},{xtype:'Button',xns:Roo,listeners:{click:function(B,e){A.dialog.el.mask(_T["d4ddf25bdf42d24705e5da2d1aced69e"]);A.form.doAction(_T["fe718e1ebf8adc7d016d7ff733296320"]);}},text:_T["5c1d5518211974c8447a38503db18739"]}]});}};
Pman.Dialog.PressReleaseImage={dialog:false,callback:false,show:function(A,cb){if(!this.dialog){this.create();}
this.callback=cb;this.data=A;this.dialog.show(this.data._el);if(this.form){this.form.reset();this.form.setValues(A);this.form.fireEvent('actioncomplete',this.form,{type:'setdata',data:A});}},create:function(){var A=this;this.dialog=Roo.factory({xtype:'LayoutDialog',xns:Roo,background:true,closable:false,collapsible:false,height:270,modal:true,resizable:false,title:_T["e3f73516a11b5fd15f18d4bd74b23a30"],width:580,items:[{xtype:'ContentPanel',xns:Roo,background:true,fitToFrame:true,region:'center',items:[{xtype:'Form',xns:Roo.form,style:'margin: 5px',url:baseURL+'/Roo/Images.php',method:'POST',listeners:{actionfailed:function(B,C){A.dialog.el.unmask();Pman.standardActionFailed(B,C);},actioncomplete:function(_s,B){if(B.type=='submit'){A.dialog.el.unmask();A.dialog.hide();if(A.callback){A.callback.call(A,A.form.getValues());}
A.form.reset();return;}},rendered:function(B){A.form=B;}},items:[{xtype:'Column',xns:Roo.form,width:'200',labelAlign:'top',items:[{xtype:'DisplayImage',xns:Roo.form,name:'filename',fieldLabel:'Image Preview',readOnly:'true',width:'180',renderer:function(v){return String.format('<img src="{0}/Images/Thumb/200/{1}/{2}" width="180">',baseURL,A.data.id,A.data.filename);}}]},{xtype:'Column',xns:Roo.form,width:'320',labelAlign:'top',items:[{xtype:'TextField',xns:Roo.form,name:'title',fieldLabel:'Press Release Name',width:'300'},{xtype:'TextArea',xns:Roo.form,name:'descript',fieldLabel:'Notes',width:'300',height:'100'}]},{xtype:'Hidden',xns:Roo.form,name:'id'}]}]}],center:{xtype:'LayoutRegion',xns:Roo,titlebar:false},buttons:[{xtype:'Button',xns:Roo,text:_T["b72b8d653936bd294f1c112df2ba657c"],listeners:{click:function(){A.form.reset();A.dialog.hide();}}},{xtype:'Button',xns:Roo,text:_T["022f847bcb8d9f05c33afa850bb96efd"],listeners:{click:function(){A.dialog.el.mask(_T["6c71e00c1e6226f31d6add04316e1942"]);A.form.doAction(_T["22446320a9f49f202ec567ee6c3abc55"]);}}}]});}};
Pman.on('beforeload',function(){Pman.register({modKey:'001-Pman.Tab.PressReleaseCompanies',module:Pman.Tab.PressReleaseCompanies,region:'center',parent:Pman.Tab.PressReleaseTab,name:_T["2fad5624b2c220076adfc0d7621fc87d"],disabled:false,permname:''});});Pman.Tab.PressReleaseCompanies=new Roo.util.Observable({panel:false,disabled:false,parentLayout:false,add:function(A,B){var C=this;this.parentLayout=A;this.panel=A.addxtype({xtype:'GridPanel',xns:Roo,listeners:{activate:function(){C.panel=this;if(C.grid){C.grid.footer.onClick('first');}}},region:'west',background:true,fitContainer:true,fitToframe:true,tableName:'Companies',title:_T["4888e81fff0e8fec50e695b385433130"],grid:{xtype:'Grid',xns:Roo.grid,autoExpandColumn:'code',loadMask:true,listeners:{render:function(){C.grid=this;if(C.panel.active){this.footer.onClick('first');}}},dataSource:{xtype:'Store',xns:Roo.data,listeners:{beforeload:function(D,o){o.params['!id']=Pman.Login.authUser.company_id;}},remoteSort:true,sortInfo:{field:'name',direction:'ASC'},reader:Pman.Readers.Companies,proxy:{xtype:'HttpProxy',xns:Roo.data,method:'GET',url:baseURL+'/Roo/Companies.php'},reader:{xtype:'JsonReader',xns:Roo.data,totalProperty:'total',root:'data',id:'id',fields:[{'name':'code','type':'string'},{'name':'name','type':'string'},{'name':'remarks','type':'string'},{'name':'owner_id','type':'int'},{'name':'address','type':'string'},{'name':'tel','type':'string'},{'name':'fax','type':'string'},{'name':'email','type':'string'},{'name':'id','type':'int'},{'name':'isOwner','type':'int'},{'name':'logo_id','type':'int'},{'name':'background_color','type':'string'},{'name':'comptype','type':'string'},{'name':'url','type':'string'},{'name':'main_office_id','type':'int'},{'name':'created_by','type':'int'},{'name':'created_dt','type':'string'},{'name':'updated_by','type':'int'},{'name':'updated_dt','type':'string'},{'name':'passwd','type':'string'},{'name':'logo_id_id','type':'int'},{'name':'logo_id_filename','type':'string'},{'name':'logo_id_ontable','type':'string'},{'name':'logo_id_onid','type':'int'},{'name':'logo_id_mimetype','type':'string'},{'name':'logo_id_width','type':'int'},{'name':'logo_id_height','type':'int'},{'name':'logo_id_filesize','type':'int'},{'name':'logo_id_displayorder','type':'int'},{'name':'logo_id_language','type':'string'},{'name':'logo_id_parent_image_id','type':'int'},{'name':'logo_id_created','type':'string'},{'name':'logo_id_imgtype','type':'string'},{'name':'logo_id_linkurl','type':'string'},{'name':'logo_id_descript','type':'string'},{'name':'logo_id_title','type':'string'},{'name':'owner_id_id','type':'int'},{'name':'owner_id_office_id','type':'int'},{'name':'owner_id_name','type':'string'},{'name':'owner_id_phone','type':'string'},{'name':'owner_id_fax','type':'string'},{'name':'owner_id_email','type':'string'},{'name':'owner_id_company_id','type':'int'},{'name':'owner_id_role','type':'string'},{'name':'owner_id_active','type':'int'},{'name':'owner_id_remarks','type':'string'},{'name':'owner_id_passwd','type':'string'},{'name':'owner_id_owner_id','type':'int'},{'name':'owner_id_lang','type':'string'},{'name':'owner_id_no_reset_sent','type':'int'},{'name':'owner_id_action_type','type':'string'},{'name':'owner_id_project_id','type':'int'},{'name':'main_office_id_id','type':'int'},{'name':'main_office_id_company_id','type':'int'},{'name':'main_office_id_name','type':'string'},{'name':'main_office_id_address','type':'string'},{'name':'main_office_id_phone','type':'string'},{'name':'main_office_id_fax','type':'string'},{'name':'main_office_id_email','type':'string'},{'name':'main_office_id_role','type':'string'}]}},footer:{xtype:'PagingToolbar',xns:Roo,displayInfo:true,displayMsg:'',emptyMsg:'',pageSize:50},selModel:{xtype:'RowSelectionModel',xns:Roo.grid,listeners:{afterselectionchange:function(D){Pman.Tab.PressReleaseImages.grid.footer.onClick('first');}}},colModel:[{xtype:'ColumnModel',xns:Roo.grid,header:'Company',width:100,dataIndex:'name',renderer:function(v){return String.format('{0}',v);}}]}});this.layout=this.panel.layout;}});
Pman.on('beforeload',function(){Pman.register({modKey:'001-Pman.Tab.PressReleaseEntry',module:Pman.Tab.PressReleaseEntry,region:'center',parent:Pman.Tab.PressReleaseTab,name:_T["882d3af136207fdcc9c3828c28d43d61"],disabled:false,permname:''});});Pman.Tab.PressReleaseEntry=new Roo.util.Observable({panel:false,disabled:false,parentLayout:false,add:function(A,B){var C=this;this.parentLayout=A;this.panel=A.addxtype({xtype:'GridPanel',xns:Roo,listeners:{activate:function(){C.panel=this;if(C.grid){C.grid.footer.onClick('first');}}},background:true,fitContainer:true,fitToframe:true,region:'center',tableName:'pressrelease_entry',title:_T["882d3af136207fdcc9c3828c28d43d61"],grid:{xtype:'Grid',xns:Roo.grid,listeners:{render:function(){C.grid=this;if(C.panel.active){this.footer.onClick('first');}},rowdblclick:function(D,E,e){var s=C.grid.getDataSource().getAt(E);Pman.Dialog.PressReleaseEdit.show(s.data,function(){C.grid.footer.onClick('first');});}},autoExpandColumn:'headline',loadMask:true,dataSource:{xtype:'Store',xns:Roo.data,proxy:{xtype:'HttpProxy',xns:Roo.data,method:'GET',url:baseURL+'/Roo/pressrelease_entry.php'},reader:{xtype:'JsonReader',xns:Roo.data,id:'id',root:'data',totalProperty:'total',fields:[{'name':'id','type':'int'},{'name':'client_id','type':'int'},{'name':'client_id_name','type':'string'},{'name':'language','type':'string'},{'name':'publish_dt','type':'date','dateFormat':'Y-m-d H:i:s'},{'name':'publish_dt_hour','type':'float'},{'name':'publish_dt_tz','type':'float'},{'name':'headline','type':'string'},{'name':'content','type':'string'},{'name':'content_data','type':'string'},{'name':'content_links','type':'string'},{'name':'updated','type':'string'},{'name':'created','type':'string'},{'name':'created_by','type':'int'},{'name':'updated_by','type':'int'},{'name':'owner_id','type':'int'},{'name':'publish_status','type':'int'}]}},footer:{xtype:'PagingToolbar',xns:Roo,pageSize:25,displayInfo:true,displayMsg:'Displaying pressrelease_entry{0} - {1} of {2}',emptyMsg:'No pressrelease_entry found'},toolbar:{xtype:'Toolbar',xns:Roo,items:[{xtype:'Button',xns:Roo,listeners:{click:function(){Pman.Dialog.PressReleaseEdit.show({id:0},function(){C.grid.footer.onClick('first');});}},cls:'x-btn-text-icon',text:_T["97b0d3f09fec9e59a34c5f83f69a72c2"],icon:Roo.rootURL+'images/default/dd/drop-add.gif'},{xtype:'Button',xns:Roo,listeners:{click:function(){var s=C.grid.getSelectionModel().getSelections();if(!s.length||(s.length>1)){Roo.MessageBox.alert(_T["6836a1c0c8926e420d5055d535093141"],s.length?_T["b584d87a9686827e406637319e3ba5b0"]:_T["07d72f1deeff78a4581d7c618b01033b"]);return;}
Pman.Dialog.PressReleaseEdit.show(C.grid.getDataSource().getById(s[0].data.id),function(){C.grid.footer.onClick('first');});}},cls:'x-btn-text-icon',text:_T["1387df571211c89a915018ac3e733177"],icon:Roo.rootURL+'images/default/tree/leaf.gif'}]},colModel:[{xtype:'ColumnModel',xns:Roo.grid,dataIndex:'client_id_name',header:'Client',width:75,renderer:function(v){return String.format('{0}',v);}},{xtype:'ColumnModel',xns:Roo.grid,dataIndex:'language',header:'Lang.',width:50,renderer:function(v){return String.format('{0}',v);}},{xtype:'ColumnModel',xns:Roo.grid,dataIndex:'publish_dt',header:'Publish Time',width:150,renderer:function(v,x,r){return String.format('{0}',v?v.format('d/M/Y H:i'):'');}},{xtype:'ColumnModel',xns:Roo.grid,dataIndex:'publish_dt_tz',header:'Timezone',width:75,renderer:function(v){var D='GMT';if(!v){return D;}return D+((v>0)?'+'+v:v);}},{xtype:'ColumnModel',xns:Roo.grid,header:'Headline',width:200,dataIndex:'headline',renderer:function(v){return String.format('{0}',v);}},{xtype:'ColumnModel',xns:Roo.grid,header:'Publish status',width:75,dataIndex:'publish_status',renderer:function(v){return String.format('{0}',v);}}]}});this.layout=this.panel.layout;}});
Pman.on('beforeload',function(){Pman.register({modKey:'001-Pman.Tab.PressReleaseImages',module:Pman.Tab.PressReleaseImages,region:'center',parent:Pman.Tab.PressReleaseTab,name:_T["5a937fa4cdb12621d75fbfd9c1f98cd9"],disabled:false,permname:''});});Pman.Tab.PressReleaseImages=new Roo.util.Observable({panel:false,disabled:false,parentLayout:false,add:function(A,B){var C=this;this.parentLayout=A;this.panel=A.addxtype({xtype:'GridPanel',xns:Roo,listeners:{activate:function(){C.panel=this;if(C.grid){C.grid.footer.onClick('first');}}},region:'center',background:true,fitContainer:true,fitToframe:true,tableName:'Images',title:_T["6123ad9dc9a4a83978f40e369098fe93"],grid:{xtype:'Grid',xns:Roo.grid,autoExpandColumn:'title',loadMask:true,listeners:{render:function(){C.grid=this;if(C.panel.active){this.footer.onClick('first');}},rowdblclick:function(D,E,e){var s=D.getDataSource().getAt(E);Pman.Dialog.PressReleaseImage.show(s.data,function(){C.grid.footer.onClick('first');});}},dataSource:{xtype:'Store',xns:Roo.data,listeners:{beforeload:function(D,o){o.params.ontable='Companies';o.params['query[imagesize]']='150x150';o.params['query[imageBaseURL]']=rootURL+'/release.php';var E=Pman.Tab.PressReleaseCompanies?Pman.Tab.PressReleaseCompanies.grid.getSelectionModel().getSelected():falseo.params.imgtype='PressRelease';o.params.onid=E?E.data.id:0;if(!o.params.onid){if(!C.isBuilder){C.panel.el.mask('select company');}return false;}},load:function(D,E,F){C.panel.el.unmask();}},remoteSort:true,sortInfo:{field:'created',direction:'DESC'},reader:{xtype:'JsonReader',xns:Roo.data,id:'id',root:'data',totalProperty:'total',fields:[{'name':'id','type':'int'},{'name':'filename','type':'string'},{'name':'ontable','type':'string'},{'name':'onid','type':'int'},{'name':'mimetype','type':'string'},{'name':'width','type':'int'},{'name':'height','type':'int'},{'name':'filesize','type':'int'},{'name':'displayorder','type':'int'},{'name':'language','type':'string'},{'name':'parent_image_id','type':'int'},{'name':'created','type':'date','dateFormat':'Y-m-d H:i:s'},{'name':'imgtype','type':'string'},{'name':'linkurl','type':'string'},{'name':'descript','type':'string'},{'name':'title','type':'string'}]},proxy:{xtype:'HttpProxy',xns:Roo.data,method:'GET',url:baseURL+'/Roo/Images.php'}},footer:{xtype:'PagingToolbar',xns:Roo,pageSize:25,displayInfo:true,displayMsg:'Displaying Images  {0} - {1} of {2}',emptyMsg:'No Images found'},toolbar:{xtype:'Toolbar',xns:Roo,items:[{xtype:'Button',xns:Roo.Toolbar,listeners:{click:function(){var D=Pman.Tab.PressReleaseCompanies?Pman.Tab.PressReleaseCompanies.grid.getSelectionModel().getSelected():falsePman.Dialog.Image.show({id:0,ontable:'Companies',onid:D.data.id,imgtype:'PressRelease'},function(E){if(!E){return;}Pman.Dialog.PressReleaseImage.show(E,function(){C.grid.footer.onClick('first');});});}},cls:'x-btn-text-icon',text:_T["50dea3784491bf900415dc0cb48cfa56"],icon:Roo.rootURL+'images/default/dd/drop-add.gif'},{xtype:'Button',xns:Roo,listeners:{click:function(){var s=C.grid.getSelectionModel().getSelections();if(!s||s.length!=1){Roo.MessageBox.alert(_T["26ad1f9420df99d50abfccd20bde4523"],_T["c1ebc05528786477caa746b8969ac7b7"]);return;}var D=C.grid.getDataSource().getById(s[0].data.id).data;Pman.Dialog.PressReleaseImage.show(D,function(){C.grid.footer.onClick('first');});}},cls:'x-btn-text-icon',text:_T["e50f23f4c186e2883a1793dc4ac1aa7b"],icon:Roo.rootURL+'images/default/tree/leaf.gif'},{xtype:'Button',xns:Roo.Toolbar,listeners:{click:function(){Pman.genericDelete(C,'Images');}},cls:'x-btn-text-icon',text:_T["f98ca9b05bf7c48a32dbdc3b631db8e0"],icon:rootURL+'/Pman/templates/images/trash.gif'}]},colModel:[{xtype:'ColumnModel',xns:Roo.grid,header:'Created',width:100,dataIndex:'created',renderer:function(v,x,r){return String.format('{0}<br/><i>{1}</i><br/>{2}<br/><i>{3}x{4}</i>',v.format('d/M/Y'),r.data.mimetype,r.data.filename,r.data.width,r.data.height);},sortable:true},{xtype:'ColumnModel',xns:Roo.grid,dataIndex:'id',header:'Image',width:100,renderer:function(v,x,r){return String.format('<img src="{0}/Images/Thumb/100/{1}/{2}" width="100">',baseURL,v,r.data.filename);}},{xtype:'ColumnModel',xns:Roo.grid,dataIndex:'title',header:'Details',width:100,renderer:function(v,x,r){var D=r.json.url.replace(/\/release.php\/Images\//,'/i/').replace(/\/([0-9]+)\/.*$/,'/$1');;var E=r.json.url_view.replace(/\/release.php\/Images\//,'/i/').replace(/\/([0-9]+)\/.*$/,'/$1');;return String.format('Download Url : <a href="http://{0}{1}" target="_new">http://{0}{1}</a>'+'<br/>View Url : <a href="http://{0}{2}" target="_new">http://{0}{2}</a>'+'<br/><b>{3}</b><br/>{4}</i>',window.location.host,D,E,v,r.json.descript);}}]}});this.layout=this.panel.layout;}});
Pman.on('beforeload',function(){Pman.register({modKey:'001-Pman.Tab.PressReleaseTab',module:Pman.Tab.PressReleaseTab,region:'center',parent:Pman,name:_T["0171f490ee4f0845462c2ef7fe7d282d"],disabled:false});});Pman.Tab.PressReleaseTab=new Roo.util.Observable({panel:false,disabled:false,parentLayout:false,add:function(A,B){var C=this;this.parentLayout=A;this.panel=A.addxtype({xtype:'NestedLayoutPanel',xns:Roo,background:true,fitToFrame:true,region:'center',title:_T["518c51a07de566914661f27461de9bc7"],layout:{xtype:'BorderLayout',xns:Roo,west:{xtype:'LayoutRegion',xns:Roo,titlebar:false,split:true,width:'200'},center:{xtype:'LayoutRegion',xns:Roo,alwaysShowTabs:true,tabPosition:'top',titlebar:false}}});this.layout=this.panel.layout;}});
Pman.Readers.Pressrelease_entry={root:'data',totalProperty:'total',id:'id',xtype:'JsonReader',fields:[{name:'id',type:'int'},{name:'client_id',type:'int'},'language',{name:'publish_dt',type:'date',dateFormat:'Y-m-d'},{name:'publish_dt_tz',type:'int'},'headline','content','content_data','content_links',{name:'updated',type:'date',dateFormat:'Y-m-d H:i:s'},{name:'created',type:'date',dateFormat:'Y-m-d H:i:s'},{name:'created_by',type:'int'},{name:'updated_by',type:'int'},{name:'owner_id',type:'int'},{name:'publish_status',type:'int'},{name:'client_id_id',type:'int'},{name:'client_id_office_id',type:'int'},'client_id_name','client_id_phone','client_id_fax','client_id_email',{name:'client_id_company_id',type:'int'},'client_id_role',{name:'client_id_active',type:'int'},'client_id_remarks','client_id_passwd',{name:'client_id_owner_id',type:'int'},'client_id_lang',{name:'client_id_no_reset_sent',type:'int'},'client_id_action_type',{name:'client_id_project_id',type:'int'},{name:'created_by_id',type:'int'},{name:'created_by_office_id',type:'int'},'created_by_name','created_by_phone','created_by_fax','created_by_email',{name:'created_by_company_id',type:'int'},'created_by_role',{name:'created_by_active',type:'int'},'created_by_remarks','created_by_passwd',{name:'created_by_owner_id',type:'int'},'created_by_lang',{name:'created_by_no_reset_sent',type:'int'},'created_by_action_type',{name:'created_by_project_id',type:'int'},{name:'updated_by_id',type:'int'},{name:'updated_by_office_id',type:'int'},'updated_by_name','updated_by_phone','updated_by_fax','updated_by_email',{name:'updated_by_company_id',type:'int'},'updated_by_role',{name:'updated_by_active',type:'int'},'updated_by_remarks','updated_by_passwd',{name:'updated_by_owner_id',type:'int'},'updated_by_lang',{name:'updated_by_no_reset_sent',type:'int'},'updated_by_action_type',{name:'updated_by_project_id',type:'int'},{name:'owner_id_id',type:'int'},{name:'owner_id_office_id',type:'int'},'owner_id_name','owner_id_phone','owner_id_fax','owner_id_email',{name:'owner_id_company_id',type:'int'},'owner_id_role',{name:'owner_id_active',type:'int'},'owner_id_remarks','owner_id_passwd',{name:'owner_id_owner_id',type:'int'},'owner_id_lang',{name:'owner_id_no_reset_sent',type:'int'},'owner_id_action_type',{name:'owner_id_project_id',type:'int'}]};Pman.Readers.Pressrelease_entry_related={root:'data',totalProperty:'total',id:'id',xtype:'JsonReader',fields:[{name:'id',type:'int'},{name:'entry_id',type:'int'},'relationship','table_name',{name:'table_id',type:'int'},{name:'entry_id_id',type:'int'},{name:'entry_id_client_id',type:'int'},'entry_id_language',{name:'entry_id_publish_dt',type:'date',dateFormat:'Y-m-d'},{name:'entry_id_publish_dt_tz',type:'int'},'entry_id_headline','entry_id_content','entry_id_content_data','entry_id_content_links',{name:'entry_id_updated',type:'date',dateFormat:'Y-m-d H:i:s'},{name:'entry_id_created',type:'date',dateFormat:'Y-m-d H:i:s'},{name:'entry_id_created_by',type:'int'},{name:'entry_id_updated_by',type:'int'},{name:'entry_id_owner_id',type:'int'},{name:'entry_id_publish_status',type:'int'}]};
