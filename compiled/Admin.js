if (typeof(_T) == 'undefined') { _T={};}
_T["14d6689659ede20bce95a3afbc69d7f5"]="Teams";
_T["1657530925c817b429ddb4bf97fe0978"]="Staff Teams";

_T["69da01e457e2f2a0ebb02e596194c754"]="Admin";
_T["b867721a6c0fe529a256cc3184811368"]="Add Project";
_T["9f4b723d1ffa9b3fb6c01391903bdfca"]="Administration";

_T["5a178e059ab3533daa4a3f07c19fb1f9"]="Groups";
_T["1ff9f57e39e5c607eb754a217a12f625"]="Permission Groups";

_T["8364277cb7aebb7e939b6128959be85b"]="Add";
_T["11d2a9130faa2b53f8a0c46fcb65d6f9"]="Fax";
_T["2850518f8fb2ce186d66fb5ab95fdc85"]="Edit";
_T["05611ce987d955a0149e5796a3f0f21e"]="Email";
_T["6a3e8f2743a8b83b817cd6225ef2ac02"]="Error";
_T["4af68a421bd4ae25a16b075c1f31a0c7"]="Phone";
_T["1b1040648d1bd36ebec9ccc00f273c2a"]="Delete";
_T["7121653d4a85e0b6337deaad2461a3b3"]="Address";
_T["374285ff04cce911b156900ad0610b83"]="Select a Row";
_T["699d51392d6e7aa401d4d67392c51beb"]="No Offices found";
_T["c0bcf22aa39b7db4fa40674ed7f21aa0"]="Select only one Row";
_T["71dc5bd5d5eb3fbdb4480d14f83cec65"]="Name / Department / Sub Comp.";
_T["f44c781279ab022f34d1670a1d691dd6"]="Displaying Offices {0} - {1} of {2}";
_T["c698b2d2a29e44490e97854dc491b72d"]="Select a company to add a office to";
_T["42603d9dedd89be3346d59211bc8d398"]="Offices / Departments / Sub-Companies";

_T["0ba99120c6904bf4c044f70b983f41ff"]="Staff / Teams";
_T["7688196bd4f26fe91afcb4ba89dbaa09"]="Staff Manager";

_T["5ae0f91d1ab815d6345b3e7df8779e17"]="Contact";
_T["f21683b352db77267c613f64cf9e72c2"]="Contacts";
_T["eec34ef27f9d63f9cbb237a82c49c547"]="Contacts List";

_T["d4650cf6ae2be8b06b0e97025f1bc35b"]="Permissions";
_T["cb15ca57cc9364dac6ed578ec4248c42"]="Groups and Permissions";

_T["3430b90edd3644ec8b40cf74e39b5a58"]="";
_T["dd6a53f3ec4097eff373be1a2981b9f6"]="Save";
_T["40e22bcebd4c093a709a1d94aae7eddf"]="Cancel";
_T["03c47106e6347d6be442e141baeb198e"]="Leader";
_T["67f112a05685b54d025b71df7e810c4c"]="Edit Team";
_T["694107e645006e31b148fbad58162a53"]="Edit Group";
_T["ef36841feea4b33d42303e3bb4f9ef6a"]="Group Name";
_T["425f2679b8159c6c2befedf611498097"]="Searching...";
_T["6f4ae3eb4445956d92c6467a6dbb65e2"]="Enter Group name";
_T["0cbfa2f00e443885deb6af46c307b514"]="Select Person Who opened";

_T["4730343a950fbffdaababbff1106f875"]="Logs";

_T["89d47001ed0bc7dce8089c70c530e9da"]="Add";
_T["3295810216bdf4311365063e10ab15cb"]="Fax";
_T["b29f1cefbb7b2c837888af98c72673a7"]="Tel";
_T["fa7ded56a3e7a4cd4bd4355c8001d4e7"]="Edit";
_T["72a390bba1504e6d0edeb309a3bd4e50"]="Name";
_T["7b07e722ca6652676cdf3b792ea3d770"]="Ref#";
_T["b6d43af91616495569344be2097741a6"]="Type";
_T["68aa6f83f2ee6598843f2f2f92f7ffce"]="Email";
_T["d07b747fbfea3158969027710bafd7a0"]="Error";
_T["e8be59bd01083870754856e8af6a9798"]="Delete";
_T["e1ed0accd8e0c6be1be42cf909dc9894"]="Address";
_T["c54291aca733e7fad1cbbb4eb61b757f"]="Offices";
_T["342885a7034a793650de1341f12ca378"]="Remarks";
_T["fa937535d755805fbd6c75f5299a1ecc"]="Companies";
_T["daf89aa71a426dbe394931265f118114"]="Select a Row";
_T["b3add4944f491fa4255f902a52c70e53"]="No Companies found";
_T["807fb12397762890519c2126d4b2761d"]="Select only one Row";
_T["942284b7800603ef7973f02a0d0d316b"]="Contact Companies Manager";
_T["face8f2106579fbbe360f20c6c099bab"]="Displaying Companies {0} - {1} of {2}";

_T["d39361eed2a55dc77b364d2e8e05669e"]="";
_T["a5bfef34caca725b18629eb454a8d0ed"]="Add";
_T["da648ec65a83d2ec0b6fb62ff8a9da45"]="All";
_T["302272b599e770c94306081db1b9c2b0"]="Code";
_T["16c99a680d7375b89ac2bfd358275990"]="Edit";
_T["03257a30723a481b6de0c5b2b3c92e66"]="Team";
_T["1422b0be61d9dbb017891ded3ac4725a"]="Type";
_T["c6de8ba3ec8a14e3cd46c019c65f9ed8"]="Error";
_T["d88a59e4df9d2b0eb247401e73106512"]="Client";
_T["a4a9da4d3a9f154a8aac3f3306d13e90"]="Closed";
_T["56c8ba04e5906e26f3e98a0ff78aac15"]="Search";
_T["19af604903388289f669e8f63641401a"]="Project";
_T["c58b05cb01570e33305ae4ec0091a50e"]="Remarks";
_T["f8980eb475aa95ca8be58905e61f474a"]="Projects";
_T["ee8a792a5a2f527b11fb1caf108e670a"]="Add Project";
_T["09ff0e18b325e410e4e8286e0941500d"]="Non-Project";
_T["b042d6b28bb1c747a3b8f397aace8fcf"]="Non-Projects";
_T["3f117653553437b0592beb6d0f7c01ba"]="Project Name";
_T["d05faf9542eae295a5c68f7dbc517a91"]="Reset Search";
_T["31efe80b1989123ce791d9c972e7f7fd"]="Select a Row";
_T["51b5b47f6a080ef6a4fec0b487b02a08"]="Project Manager";
_T["f70e5beb9b7006918d0b43cad001a57d"]="Project (Closed)";
_T["2f368be8825faa2910155e721125a1d5"]="Select only one Row";
_T["28978164fd48d9b02b8a83e4957cf883"]="Non-Project (Closed)";
_T["c53484bd6bebd4ba5602c0e9d5fdae35"]="Project (Unconfirmed)";

_T["3f9458fc9671d0b5780ed148372cc24d"]="Contacts Manager";

_T["63808ec7983c0ceee59da6d0288aafcd"]="Groups";
_T["e588768ea57cf7e551471aafd00b307e"]="Contacts Groups";

_T["6c4ab083946c373f2adeefc6cc3f7a0c"]="Staff";

_T["5e246909a49d67371a5fdc0ebca2eb74"]="";
_T["469997edd419d96959754b6c5836bb1f"]="Add";
_T["27676b11ab383213a3b854fd5ae8c169"]="Fax";
_T["06ec80b73375bae5dc4310bb3b74a2c7"]="Edit";
_T["c12cd5233ac730fc7f0129d4d0cdad1c"]="Save";
_T["da7f39a9b5ca989a11c50819b0e11a8c"]="Staff";
_T["60d933dfa7753ecb66c14d62d64dc91a"]="[All]";
_T["9420ef6833779757d6d478400f999f31"]="Delete";
_T["fa8d63966a54ea2f37fdb2f57014079b"]="Events";
_T["a374d5906bdb8bc352e514774bae00a5"]="Groups";
_T["2be9b95e4897f569988d1da2c3c696e8"]="Person";
_T["5469b404166eeda9825a4843504910da"]="Reload";
_T["4bb1807156a2dad4663604173f607e86"]="Rights";
_T["51a1afb021b662d94c99e75b3fd6dae3"]="Offices";
_T["2ddc69dbb3bb3180c86d238e4e43044d"]="Admin Tab";
_T["0404d4821b03a48193b6189238410506"]="Companies";
_T["77a76222cc0c1da727ff6a327e880b6d"]="Documents";
_T["91a7a956228674052e355ee7578d86d4"]="List/View";
_T["097fc1f523b6ddd8a0763b5f841b173e"]="Timesheet";
_T["06a52628ddc9ff79dce87c94b0f9d931"]="Permission";
_T["71d64cf7a0239fc8c37f808911d5cb37"]="Print / Export";
_T["9efb8a28d8020256496b0373a150881f"]="Document Manager";
_T["d481fb9cc897bfde3f7d9d4b3f7ac653"]="Unread Documents";
_T["541e3bc900a640c3cb86027ca2aea691"]="Work In Progress";
_T["55fc11c5ead376d75fe79969a2c826c5"]="Permission Groups";
_T["96d64c29469febba0e69f066f3fa5cad"]="Project Directory";
_T["504a6ec27d97facab115d15d4fd40675"]="Distribute Documents";
_T["a8158b4933ffde3322bdd34411bac480"]="Send Faxes To Companies";
_T["b5c0fe8dd8c6d39aef5041ad32a98090"]="There was a problem saving the data";
_T["c2df49acf6bc67c764118d525d6ab7c2"]="You can not set permissions for that group";

_T["030108316dbe80f3bb3bd39a26841a4e"]="Staff Membership";
_T["6aee775a74f303c87e97a419fb5b65ea"]="Permission Group Membership";

_T["bc286832507396098fb722f0044c19fa"]="Add";
_T["471a89fceb6e624e6ccbae3921eedee1"]="All";
_T["442a6817e8f99102370b535fa55d2d05"]="Edit";
_T["ce80b3a191db7f941f320dea440b47b0"]="Error";
_T["2cc3dce41de8c75237e0ada619eed78d"]="Show:";
_T["c9af45ef2226a5c486f868634f557ca4"]="Closed";
_T["bdf15682d085d16c96ee0691a12093fe"]="Project";
_T["abd8c39761eb10b00ad61ce418ff6504"]="Search:";
_T["f6437120f077a24232be600cea646ec1"]="Projects";
_T["5707676d5fcba13248788c5ead856c7a"]="Non-Project";
_T["08122fd86306d97ace5e61fdbdab612a"]="Non-Projects";
_T["2fd9324fe11c112090e216c588b1ce2e"]="Admin - Projects";
_T["0f04e5f053394b0c0f0c8c7a59c67a44"]="Project (Closed)";
_T["0e9c16fe133240e390334f702776a673"]="Select a Project";
_T["a416145f09384cea45e24d3da8321900"]="No Projects found";
_T["7b5b05c6f68ff37d71ebd54016374cd4"]="Non-Project (Closed)";
_T["af28d3518a6766751b3919d79c405dd1"]="Project (Unconfirmed)";
_T["a0c74aadfcf9b556a76ebc1d0142f560"]="Select only one Project";
_T["680089b0ca930a79f1b605e9962c523c"]="Displaying Projects  {0} - {1} of {2}";

_T["b6ae8269eb074050cf22d7199051a157"]="Show";
_T["0d38c3fb4c8500c67d01990bba2cf569"]="Events";
_T["a9dbe313b1e0082050bda7ce5fc93f7e"]="Person ";
_T["d2489c8b4febecb80a1c387c1431696c"]="Searching...";
_T["b827dddadd3ebfc23104551ee6a3a6f9"]="Select Person ";
_T["9a0575c139cbae13541dff297791a7d8"]="No Events found";
_T["53510339347f1ff64b52c8c3747c0cd3"]="Admin - Logs - Events";
_T["2ff0fe02cb998d6c2953ae2d68ca6ea4"]="Displaying Events  {0} - {1} of {2}";

_T["001969a043caf8ee9c27978405c14cf2"]="Bulk add Contacts";

_T["cc3c9c34f380feb1c3d59fc9ade606eb"]="Error";
_T["f721d54a743cf7f401af0579e7524d23"]="Translations";
_T["7dc4f8fc44cbe1bbe1d99a2d7bac22d4"]="Select Module";
_T["69cea9ae503551d985aced167bb01c62"]="Select Language";
_T["13e4f84d09a2d4057fdee709efdcca61"]="Admin - Translations";
_T["809badd958a9c1ea39a77cc940810dde"]="There was a problem saving the data - try reloading";

Pman.on("beforeload",function(){Pman.register({modKey:"00-pman-tab-teams",module:Pman.Tab.Teams,region:"west",parent:Pman.Tab.StaffMgr,name:_T["1657530925c817b429ddb4bf97fe0978"]});});Pman.Tab.Teams=new Pman.Tab.GroupsList({id:"teams",title:_T["14d6689659ede20bce95a3afbc69d7f5"],type:1,getDialog:function(){return Pman.Dialog.Groups;
}});
Pman.on("beforeload",function(){if(Pman.Login.authUser.company_id_isOwner*1<1){return;}Pman.register({modKey:"900-pman-tab-admin",module:Pman.Tab.Admin,region:"center",parent:Pman,name:_T["9f4b723d1ffa9b3fb6c01391903bdfca"]});if(Pman.hasPerm("Core.Projects_All","E")){Pman.subMenuItems.push({seqid:401,text:_T["b867721a6c0fe529a256cc3184811368"],cls:"x-btn-text-icon",icon:Ext.rootURL+"images/default/dd/drop-add.gif",handler:function(){Pman.Dialog.Projects.show({id:0},function(A){Pman.refreshActivePanel();
});}});Pman.subMenuItems.push(new Roo.menu.Separator({seqid:402}));}});Pman.Tab.Admin={tab:false,add:function(C,B){if(!Pman.hasPerm("Admin.Admin_Tab","S")){return;}if(this.tab){return;}this.layout=new Ext.BorderLayout(C.getEl().createChild({tag:"div"}),{center:{autoScroll:true,hideTabs:false,tabPosition:"top"}});
var A=this;this.tab=C.add("center",new Ext.NestedLayoutPanel(this.layout,{title:_T["69da01e457e2f2a0ebb02e596194c754"],background:true}));this.tab.on("activate",function(){});},buildAdminLayout:function(){if(isDev){Pman.Translation.add(this.layout,"center");
}}};
Pman.on("beforeload",function(){Pman.Tab.Groups.title=_T["5a178e059ab3533daa4a3f07c19fb1f9"];Pman.register({modKey:"00-pman-tab-groups",module:Pman.Tab.Groups,region:"west",parent:Pman.Tab.GroupMgr,name:_T["1ff9f57e39e5c607eb754a217a12f625"]});});Pman.Tab.Groups=new Pman.Tab.GroupsList({id:"groups",title:_T["5a178e059ab3533daa4a3f07c19fb1f9"],type:0,getDialog:function(){return Pman.Dialog.Groups;
}});
Pman.Tab.Office={grid:false,panel:false,add:function(G,C){if(this.panel){G.getRegion(C).showPanel(this.panel);return;}this.innerLayout=new Ext.BorderLayout(G.getEl().createChild({tag:"div"}),{center:{autoScroll:true,hideTabs:true}});this.tab=G.add(C,new Ext.NestedLayoutPanel(this.innerLayout,{title:_T["42603d9dedd89be3346d59211bc8d398"]}));
this.innerLayout.beginUpdate();var D=Pman.Dialog.Office;var H=function(){B.paging.onClick("refresh");};this.grid=new Ext.grid.Grid(this.innerLayout.getEl().createChild({tag:"div"}),{id:"grid-Office",ds:new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:baseURL+"/Roo/Office.html",method:"GET"}),reader:Pman.Readers.Office,remoteSort:true,listeners:{beforeload:function(t,o){o.params.company_id=Pman.Tab.Companies.getSelectedId();
if(!o.params.company_id){return false;}},loadexception:Pman.loadException}}),cm:new Ext.grid.ColumnModel([{"id":"Office-name",header:_T["71dc5bd5d5eb3fbdb4480d14f83cec65"],dataIndex:"name",sortable:true,width:200},{"id":"Office-phone",header:_T["4af68a421bd4ae25a16b075c1f31a0c7"],dataIndex:"phone",sortable:true,width:100},{"id":"Office-fax",header:_T["11d2a9130faa2b53f8a0c46fcb65d6f9"],dataIndex:"fax",sortable:true,width:100},{"id":"Office-email",header:_T["05611ce987d955a0149e5796a3f0f21e"],dataIndex:"email",sortable:true,width:150,renderer:function(v){return (v.length&&v.indexOf("@")>0)?String.format("<a href=\"mailto:{0}\">{0}</a>",v):v;
}},{"id":"Office-address",header:_T["7121653d4a85e0b6337deaad2461a3b3"],dataIndex:"address",sortable:true,width:300}]),autoExpandColumn:"Office-address",clicksToEdit:1,loadMask:true,listeners:{rowdblclick:function(g,ri,e){var s=g.getDataSource().getAt(ri).datas.company_name=Pman.Tab.Companies.grid.getSelectionModel().getSelected().data.name;
D.show(s,H);}}});this.panel=this.innerLayout.add("center",new Ext.GridPanel(this.grid,{fitToframe:true,fitContainer:true}));this.grid.render();var E=this.grid.getView().getFooterPanel(true);this.paging=new Ext.PagingToolbar(E,this.grid.getDataSource(),{pageSize:25,displayInfo:true,displayMsg:_T["f44c781279ab022f34d1670a1d691dd6"],emptyMsg:_T["699d51392d6e7aa401d4d67392c51beb"]});
var A=this.grid;var F=this.grid.getView().getHeaderPanel(true);var tb=new Ext.Toolbar(F);var B=Pman.Tab.Office;tb.add({text:_T["8364277cb7aebb7e939b6128959be85b"],cls:"x-btn-text-icon",icon:Ext.rootURL+"images/default/dd/drop-add.gif",hidden:!Pman.hasPerm("Core.Offices","A"),handler:function(){if(!Pman.Tab.Companies.grid.getSelectionModel().getSelections().length){Ext.MessageBox.alert(_T["c698b2d2a29e44490e97854dc491b72d"]);
return;}var I=Pman.Tab.Companies.grid.getSelectionModel().getSelected().data;D.show({id:0,company_name:I.name,company_id:I.id,address:I.address,phone:I.tel,fax:I.fax,email:I.email},H);}},{text:_T["2850518f8fb2ce186d66fb5ab95fdc85"],cls:"x-btn-text-icon",icon:Ext.rootURL+"images/default/tree/leaf.gif",hidden:!Pman.hasPerm("Core.Offices","E"),handler:function(){var s=A.getSelectionModel().getSelections();
if(!s.length||(s.length>1)){Ext.MessageBox.alert(_T["6a3e8f2743a8b83b817cd6225ef2ac02"],s.length?_T["c0bcf22aa39b7db4fa40674ed7f21aa0"]:_T["374285ff04cce911b156900ad0610b83"]);return;}s[0].data.company_name=Pman.Tab.Companies.grid.getSelectionModel().getSelected().data.name;
D.show(s[0].data,H);}},{text:_T["1b1040648d1bd36ebec9ccc00f273c2a"],cls:"x-btn-text-icon",icon:rootURL+"/Pman/templates/images/trash.gif",hidden:!Pman.hasPerm("Core.Offices","D"),handler:function(){Pman.genericDelete(B,"Office");}});this.tab.on("activate",function(){});
this.innerLayout.endUpdate();},show:function(B,A){this.add(B,A);this.grid.getDataSource().load({params:{start:0,limit:25}});}};
Pman.on("beforeload",function(){if(!Pman.hasPerm("Core.Staff","E")){return;}Pman.register({modKey:"020-pman-tab-staffmgr",module:Pman.Tab.StaffMgr,region:"center",parent:Pman.Tab.Admin,name:_T["7688196bd4f26fe91afcb4ba89dbaa09"],finalize:function(){var A=Pman.Tab.StaffMgr;
if(!A.layout){return;}A.layout.endUpdate();}});});Pman.Tab.StaffMgr={grid:false,panel:false,title:false,add:function(C,B){var A=this;if(this.panel){C.getRegion(B).showPanel(this.panel);return;}this.layout=new Ext.BorderLayout(C.getEl().createChild({tag:"div"}),{west:{autoScroll:true,hideTabs:true,titlebar:true,split:true,initialSize:250},center:{autoScroll:true,hideTabs:false,tabPosition:"top"}});
this.tab=C.add(B,new Ext.NestedLayoutPanel(this.layout,{title:this.title||_T["0ba99120c6904bf4c044f70b983f41ff"],background:true}));this.tab.on("activate",function(){A.layout.getRegion("center").showPanel(0);if(A.layout.getRegion("west").panels.length){A.layout.getRegion("west").showPanel(0);
Pman.Tab.Teams.refresh();}else{Pman.Tab.PersonStaff.loadFirst();}});this.layout.beginUpdate();}};
Pman.on("beforeload",function(){if(!Pman.hasPerm("Core.Person","E")){return;}Pman.register({modKey:"040-pman-tab-contacts",module:Pman.Tab.Contacts,region:"center",parent:Pman.Tab.ContactsMgr,name:_T["eec34ef27f9d63f9cbb237a82c49c547"]});});Pman.Tab.Contacts=new Pman.Tab.PersonList({id:"contacts",type:2,title:_T["f21683b352db77267c613f64cf9e72c2"],itemDisplayName:_T["5ae0f91d1ab815d6345b3e7df8779e17"],permName:"Core.Person",getLeftSelections:function(){return Pman.Tab.ContactGrps.grid?Pman.Tab.ContactGrps.grid.getSelectionModel().getSelections():[];
},beforeload:function(t,o){var B=Pman.Tab.Contacts;o.params["query[person_not_internal]"]=1;o.params["query[search]"]=B.searchBox.getValue();var A=B.getLeftSelections();if(A.length){o.params["query[in_group]"]=A[0].data.id;}o.params["query[type]"]=B.type;
},columns:function(){return [this.c_project_id_code(),this.c_company_id_name(),this.c_name(),this.c_role(),this.c_phone(),this.c_fax(),this.c_email()]},dialog:function(){return Pman.Dialog.PersonEdit;},bulkAdd:function(){return Pman.Dialog.PersonBulkAdd;},newDefaults:function(){return {id:0};
}});
Pman.on("beforeload",function(){if(!Pman.hasPerm("Core.Groups","E")){return;}Pman.register({modKey:"060-pman-tab-groupmgr",module:Pman.Tab.GroupMgr,region:"center",parent:Pman.Tab.Admin,name:_T["cb15ca57cc9364dac6ed578ec4248c42"],finalize:function(){var A=Pman.Tab.GroupMgr;
if(!A.layout){return;}A.layout.endUpdate();}});});Pman.Tab.GroupMgr={grid:false,panel:false,add:function(C,B){if(this.panel){C.getRegion(B).showPanel(this.panel);return;}this.layout=new Ext.BorderLayout(C.getEl().createChild({tag:"div"}),{west:{autoScroll:true,hideTabs:true,titlebar:true,split:true,initialSize:250},center:{autoScroll:true,hideTabs:false,tabPosition:"top"}});
this.tab=C.add(B,new Ext.NestedLayoutPanel(this.layout,{title:_T["d4650cf6ae2be8b06b0e97025f1bc35b"],background:true}));var A=this;this.tab.on("activate",function(){A.layout.getRegion("center").showPanel(0);Pman.Tab.Groups.refresh();});this.layout.beginUpdate();
}};
Pman.Dialog.Groups={dialog:false,form:false,id:"Group",create:function(){if(this.dialog){return;}var A=this;this.dialog=new Ext.LayoutDialog(Ext.get(document.body).createChild({tag:"div"}),{autoCreated:true,title:"edit team",modal:true,width:650,height:150,shadow:true,minWidth:200,minHeight:150,closable:false,draggable:false,center:{autoScroll:false,titlebar:false,hideTabs:true,closeOnTab:true,alwaysShowTabs:false}});
this.dialog.addKeyListener(27,this.dialog.hide,this.dialog);this.dialog.addButton(_T["40e22bcebd4c093a709a1d94aae7eddf"],this.dialog.hide,this.dialog);this.dialog.addButton(_T["dd6a53f3ec4097eff373be1a2981b9f6"],this.save,this);this.layout=this.dialog.getLayout();
this.layout.beginUpdate();this.form=new Ext.form.Form({labelWidth:250,listeners:{actionfailed:function(f,B){A.dialog.el.unmask();Pman.standardActionFailed(f,B);},actioncomplete:function(f,B){A.dialog.el.unmask();if(B.type=="load"){A.data=B.result.data;return;
}if(B.type=="submit"){A.dialog.hide();if(A.callback){A.callback.call(this,B.result.data);}return;}}}});this.form.addxtype.apply(this.form,[{name:"name",fieldLabel:_T["ef36841feea4b33d42303e3bb4f9ef6a"],value:"",allowBlank:false,qtip:_T["6f4ae3eb4445956d92c6467a6dbb65e2"],xtype:"TextField",width:300},{xtype:"ComboBox",fieldLabel:_T["03c47106e6347d6be442e141baeb198e"],name:"leader_name",selectOnFocus:true,qtip:_T["0cbfa2f00e443885deb6af46c307b514"],allowBlank:true,width:280,store:new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:baseURL+"/Roo/Person.php",method:"GET"}),reader:Pman.Readers.Person,listeners:{beforeload:function(st,o){o.params.company_id=Pman.Login.authUser.company_id*1;
}}}),displayField:"name",valueField:"id",hiddenName:"leader",typeAhead:true,forceSelection:true,doForce:function(){if(this.el.dom.value.length>0){this.el.dom.value=this.lastSelectionText===undefined?_T["3430b90edd3644ec8b40cf74e39b5a58"]:this.lastSelectionText;
this.applyEmptyText();if(!this.el.dom.value.length){this.setFromData({id:0,name:"----"});}}},triggerAction:"all",tpl:new Ext.Template("<div class=\"x-grid-cell-text x-btn button\">","<b>{name}</b> {role}","</div>"),queryParam:"query[name]",loadingText:_T["425f2679b8159c6c2befedf611498097"],listWidth:300,minChars:2,pageSize:20},{name:"id",value:"",xtype:"Hidden"},{name:"type",value:"",xtype:"Hidden"}]);
var ef=this.dialog.getLayout().getEl().createChild({tag:"div"});ef.dom.style.margin=10;this.form.render(ef.dom);var vp=this.dialog.getLayout().add("center",new Ext.ContentPanel(ef,{autoCreate:true,width:250,maxWidth:250,fitToFrame:true}));this.layout.endUpdate();
},_id:0,show:function(A,B){this.callback=B;this._id=A.id;this.data=A;this.create();this.form.reset();this.form.setValues(A);this.dialog.show();this.dialog.setTitle(A.type?_T["694107e645006e31b148fbad58162a53"]:_T["67f112a05685b54d025b71df7e810c4c"]);var lw=Ext.get(this.form.findField("leader").el.dom.parentNode.parentNode.parentNode);
lw.setVisibilityMode(Ext.Element.DISPLAY);if(this.data.type){lw.show();this.form.findField("leader").setFromData({id:this.data.leader,name:this.data.leader?this.data.leader_name:""});}else{lw.hide();}},save:function(){this.form.doAction("submit",{url:baseURL+"/Roo/Groups.php",method:"POST",params:{_id:this._id,ts:Math.random()}});
}};
Pman.on("beforeload",function(){if(Pman.Login.authUser.company_id_comptype!="OWNER"){return;}if(!Pman.hasPerm("Admin.Logs","S")){return;}Pman.register({modKey:"901-pman_tab_adminlogs",module:Pman.Tab.AdminLogs,region:"center",parent:Pman,name:_T["4730343a950fbffdaababbff1106f875"]});
});Pman.Tab.AdminLogs={panel:false,disabled:false,parentLayout:false,add:function(C,B){if(this.disabled){return;}var A=this;this.parentLayout=C;this.panel=this.parentLayout.addxtype({xtype:"NestedLayoutPanel",background:true,fitToFrame:true,region:"center",title:_T["4730343a950fbffdaababbff1106f875"],layout:{xtype:"BorderLayout",center:{titlebar:false,tabPosition:"top"}}});
this.layout=this.panel.layout;}};
Pman.on("beforeload",function(){if(Pman.hasPerm("Core.Companies","E")){Pman.register({modKey:"030-pman-tab-companies",module:Pman.Tab.Companies,region:"center",parent:Pman.Tab.Admin,name:_T["942284b7800603ef7973f02a0d0d316b"]});}});Pman.Tab.Companies=new Roo.util.Observable({events:{"beforerender":true},colExtra:[],grid:false,panel:false,add:function(C,B){var A=this;
if(this.tab){C.getRegion(B).showPanel(this.panel);return;}this.innerLayout=new Ext.BorderLayout(C.getEl().createChild({tag:"div"}),{center:{autoScroll:true,hideTabs:true},south:{split:true,title:_T["c54291aca733e7fad1cbbb4eb61b757f"],autoScroll:true,hideTabs:true,height:200}});
this.tab=C.add(B,new Ext.NestedLayoutPanel(this.innerLayout,{title:_T["fa937535d755805fbd6c75f5299a1ecc"],background:true,controller:this}));this.tab.on("activate",function(){A.delayedCreate();A.paging.onClick("refresh");});},delayedCreate:function(){var C=this;
if(this.grid){return;}this.innerLayout.beginUpdate();var A=this.innerLayout.getEl().createChild({tag:"div"});this.grid=new Ext.grid.Grid(A,{id:"grid-companies",ds:new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:baseURL+"/Roo/Companies.html",method:"GET"}),reader:Pman.Readers.Companies,listeners:{load:function(){Pman.Tab.Office.paging.onClick("refresh");
},loadexception:Pman.loadException},remoteSort:true}),cm:new Ext.grid.ColumnModel([{header:_T["b6d43af91616495569344be2097741a6"],dataIndex:"comptype",sortable:true,width:90,renderer:function(v,x,r){return Pman.Dialog.Companies.comptypeListToString(r.data.isOwner?"OWNER":v);
}},{header:_T["7b07e722ca6652676cdf3b792ea3d770"],dataIndex:"code",sortable:true,width:50},{id:"companies-name",header:_T["72a390bba1504e6d0edeb309a3bd4e50"],dataIndex:"name",sortable:true,width:200,renderer:function(v,x,r){return String.format(r.data.isOwner?"<B>{0}</B>":"{0}",v);
}},{header:_T["b29f1cefbb7b2c837888af98c72673a7"],dataIndex:"tel",sortable:true,width:100},{header:_T["3295810216bdf4311365063e10ab15cb"],dataIndex:"fax",sortable:true,width:100},{header:_T["68aa6f83f2ee6598843f2f2f92f7ffce"],dataIndex:"email",sortable:true,width:100,renderer:function(v){return (v.length&&v.indexOf("@")>0)?String.format("<a href=\"mailto:{0}\">{0}</a>",v):v;
}},{id:"companies-address",header:_T["e1ed0accd8e0c6be1be42cf909dc9894"],dataIndex:"address",sortable:true,width:200},{id:"companies-remarks",header:_T["342885a7034a793650de1341f12ca378"],dataIndex:"remarks",sortable:true,width:200}]),autoExpandColumn:"companies-address",clicksToEdit:1,loadMask:true,listeners:{cellclick:function(g,ri,ci,e){Pman.Tab.Office.paging.onClick("refresh");
},rowdblclick:function(g,ri,e){var s=g.getDataSource().getAt(ri).data;_dialog.show(s,F);}}});this.panel=this.innerLayout.add("center",new Ext.GridPanel(this.grid,{fitToframe:true,fitContainer:true,controller:this}));this.grid.render();var D=this.grid.getView().getFooterPanel(true);
this.paging=new Ext.PagingToolbar(D,this.grid.getDataSource(),{pageSize:25,displayInfo:true,displayMsg:_T["face8f2106579fbbe360f20c6c099bab"],emptyMsg:_T["b3add4944f491fa4255f902a52c70e53"]});var B=this.grid;var E=this.grid.getView().getHeaderPanel(true);
var tb=new Ext.Toolbar(E);var F=function(){C.paging.onClick("refresh");};var _dialog=Pman.Dialog.Companies;tb.add({text:_T["89d47001ed0bc7dce8089c70c530e9da"],cls:"x-btn-text-icon",icon:Ext.rootURL+"images/default/dd/drop-add.gif",hidden:!Pman.hasPerm("Core.Companies","A"),handler:function(){_dialog.show({id:0},F);
}},{text:_T["fa7ded56a3e7a4cd4bd4355c8001d4e7"],cls:"x-btn-text-icon",icon:Ext.rootURL+"images/default/tree/leaf.gif",hidden:!Pman.hasPerm("Core.Companies","E"),handler:function(){var s=B.getSelectionModel().getSelections();if(!s.length||(s.length>1)){Ext.MessageBox.alert(_T["d07b747fbfea3158969027710bafd7a0"],s.length?_T["807fb12397762890519c2126d4b2761d"]:_T["daf89aa71a426dbe394931265f118114"]);
return;}_dialog.show(s[0].data,F);}},{text:_T["e8be59bd01083870754856e8af6a9798"],cls:"x-btn-text-icon",hidden:!Pman.hasPerm("Core.Companies","D"),icon:rootURL+"/Pman/templates/images/trash.gif",handler:function(){Pman.genericDelete(C,"Companies");}});Pman.Tab.Office.add(this.innerLayout,"south");
this.innerLayout.endUpdate();},show:function(B,A){this.add(B,A);this.grid.getDataSource().load({params:{start:0,limit:25}});},getSelectedId:function(){var s=this.grid.getSelectionModel().getSelections();if(s.length!=1){return 0;}return s[0].data.id;}});
Pman.on("beforeload",function(){return;if(!Pman.hasPerm("Core.Projects_All","E")){return;}Pman.register({modKey:"010-pman-tab-projectmgr",module:Pman.Tab.ProjectsMgr,region:"center",parent:Pman.Tab.Admin,name:_T["51b5b47f6a080ef6a4fec0b487b02a08"]});});Pman.Tab.ProjectsMgr={grid:false,panel:false,disabled:false,filter:"P,N,U",searchBox:false,add:function(C,B){if(this.disabled){return;
}Pman.subMenuItems.push({seqid:401,text:_T["ee8a792a5a2f527b11fb1caf108e670a"],cls:"x-btn-text-icon",icon:Ext.rootURL+"images/default/dd/drop-add.gif",handler:function(){Pman.Dialog.Projects.show({id:0},function(D){Pman.refreshActivePanel();});}});Pman.subMenuItems.push(new Roo.menu.Separator({seqid:402}));
if(this.panel){C.getRegion(B).showPanel(this.panel);return;}this.innerLayout=new Ext.BorderLayout(C.getEl().createChild({tag:"div"}),{center:{autoScroll:true,hideTabs:true}});var A=this;this.tab=C.add(B,new Ext.NestedLayoutPanel(this.innerLayout,{title:_T["f8980eb475aa95ca8be58905e61f474a"],background:true}));
this.tab.on("activate",function(){A.delayedCreate();A.paging.onClick("refresh");});},delayedCreate:function(){if(this.grid){return;}var B=this;this.innerLayout.beginUpdate();var F=function(){B.paging.onClick("refresh");};var frm=this.innerLayout.getEl().createChild({tag:"div"});
this.grid=new Ext.grid.Grid(frm,{id:"grid-projectsmgr",ds:new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:baseURL+"/Roo/Projects.php",method:"GET"}),remoteSort:true,reader:Pman.Readers.Projects,listeners:{beforeload:function(t,o){o.params=o.params?o.params:{};
o.params["query[project_search]"]=B.searchBox.getValue();o.params["query[project_filter]"]=B.filter;},loadexception:Pman.loadException},sortInfo:{field:"code",direction:"DESC"}}),cm:new Ext.grid.ColumnModel([{header:_T["1422b0be61d9dbb017891ded3ac4725a"],dataIndex:"type",sortable:true,width:130,renderer:function(v){return B.typeToString(v)}},{header:_T["302272b599e770c94306081db1b9c2b0"],dataIndex:"code",sortable:true,width:70},{header:_T["3f117653553437b0592beb6d0f7c01ba"],dataIndex:"name",sortable:true,width:300},{header:_T["d88a59e4df9d2b0eb247401e73106512"],dataIndex:"client_id_name",sortable:true,width:150},{header:_T["03257a30723a481b6de0c5b2b3c92e66"],dataIndex:"team_id_name",sortable:true,width:100},{id:"projects-remarks",header:_T["c58b05cb01570e33305ae4ec0091a50e"],dataIndex:"remarks",sortable:true,width:300}]),autoExpandColumn:"projects-remarks",clicksToEdit:1,loadMask:true,listeners:{rowdblclick:function(g,ri,e){var s=g.getDataSource().getAt(ri).data;
C.show(s,F);}}});this.panel=this.innerLayout.add("center",new Ext.GridPanel(this.grid,{fitToframe:true,fitContainer:true}));this.grid.render();var D=this.grid.getView().getFooterPanel(true);this.paging=new Ext.PagingToolbar(D,this.grid.getDataSource(),{pageSize:25,displayInfo:true,displayMsg:_T["d39361eed2a55dc77b364d2e8e05669e"],emptyMsg:_T["d39361eed2a55dc77b364d2e8e05669e"]});
var A=this.grid;var E=this.grid.getView().getHeaderPanel(true);var tb=new Ext.Toolbar(E);this.searchBox=new Ext.form.TextField({name:"search",width:135,listeners:{specialkey:function(f,e){if(e.getKey()==13){F();}}}});var C=Pman.Dialog.Projects;tb.add({text:_T["a5bfef34caca725b18629eb454a8d0ed"],cls:"x-btn-text-icon",icon:Ext.rootURL+"images/default/dd/drop-add.gif",handler:function(){C.show({id:0},F);
}},{text:_T["16c99a680d7375b89ac2bfd358275990"],cls:"x-btn-text-icon",icon:Ext.rootURL+"images/default/tree/leaf.gif",handler:function(){var s=A.getSelectionModel().getSelections();if(!s.length||(s.length>1)){Ext.MessageBox.alert(_T["c6de8ba3ec8a14e3cd46c019c65f9ed8"],s.length?_T["2f368be8825faa2910155e721125a1d5"]:_T["31efe80b1989123ce791d9c972e7f7fd"]);
return;}C.show(s[0].data,F);}},"-","Search: ",this.searchBox,{icon:rootURL+"/Pman/templates/images/search.gif",cls:"x-btn-icon",qtip:_T["56c8ba04e5906e26f3e98a0ff78aac15"],handler:function(){F();}},{icon:rootURL+"/Pman/templates/images/edit-clear.gif",cls:"x-btn-icon",qtip:_T["d05faf9542eae295a5c68f7dbc517a91"],handler:function(){B.searchBox.setValue("");
F();}},"-","Show : ",{text:_T["da648ec65a83d2ec0b6fb62ff8a9da45"],toggleGroup:"pgrp",pressed:true,enableToggle:true,toggleHandler:function(b,st){if(st){B.filter="P,N,U";}F();}},{text:_T["f8980eb475aa95ca8be58905e61f474a"],toggleGroup:"pgrp",pressed:false,enableToggle:true,toggleHandler:function(b,st){if(st){B.filter="P,U";
}F();}},{text:_T["b042d6b28bb1c747a3b8f397aace8fcf"],toggleGroup:"pgrp",pressed:false,enableToggle:true,toggleHandler:function(b,st){if(st){B.filter="N";}F();}},{text:_T["a4a9da4d3a9f154a8aac3f3306d13e90"],toggleGroup:"pgrp",pressed:false,enableToggle:true,toggleHandler:function(b,st){if(st){B.filter="X,C";
}F();}});this.innerLayout.endUpdate();},show:function(B,A){this.add(B,A);this.grid.getDataSource().load({params:{start:0,limit:25}});},getTypes:function(){return [["U",_T["c53484bd6bebd4ba5602c0e9d5fdae35"]],["P",_T["19af604903388289f669e8f63641401a"]],["C",_T["f70e5beb9b7006918d0b43cad001a57d"]],["N",_T["09ff0e18b325e410e4e8286e0941500d"]],["X",_T["28978164fd48d9b02b8a83e4957cf883"]]];
},typeToString:function(v){var ar=this.getTypes();var A="";Ext.each(ar,function(a){if(a[0]==v){A=a[1];return false;}});return A;}};
Pman.on("beforeload",function(){if(!Pman.hasPerm("Core.Person","E")){return;}Pman.register({modKey:"060-pman-tab-contactsmgr",module:Pman.Tab.ContactsMgr,region:"center",parent:Pman.Tab.Admin,name:_T["3f9458fc9671d0b5780ed148372cc24d"]});});Pman.Tab.ContactsMgr={grid:false,panel:false,title:false,add:function(C,B){if(this.panel){C.getRegion(B).showPanel(this.panel);
return;}this.layout=new Ext.BorderLayout(C.getEl().createChild({tag:"div"}),{west:{autoScroll:true,hideTabs:true,titlebar:true,split:true,initialSize:250},center:{autoScroll:true,hideTabs:false,tabPosition:"top"}});this.tab=C.add(B,new Ext.NestedLayoutPanel(this.layout,{title:this.title||_T["3f9458fc9671d0b5780ed148372cc24d"],background:true}));
var A=this;this.tab.on("activate",function(){if(A.layout.getRegion("west").panels.length){A.layout.getRegion("west").showPanel(0);Pman.Tab.ContactGrps.refresh();}else{Pman.Tab.Contacts.loadFirst();}A.layout.getRegion("center").showPanel(0);});},donelayout:false};

Pman.on("beforeload",function(){Pman.Tab.ContactGrps=new Pman.Tab.GroupsList({id:"cgroups",title:_T["63808ec7983c0ceee59da6d0288aafcd"],type:2,getDialog:function(){return Pman.Dialog.Groups;}});Pman.register({modKey:"060-pman-tab-contactgrps",module:Pman.Tab.ContactGrps,region:"west",parent:Pman.Tab.ContactsMgr,name:_T["e588768ea57cf7e551471aafd00b307e"]});
});
Pman.on("beforeload",function(){Pman.register({modKey:"001-pman-tab-personlist",module:Pman.Tab.PersonStaff,region:"center",parent:Pman.Tab.StaffMgr,name:_T["6c4ab083946c373f2adeefc6cc3f7a0c"]});});Pman.Tab.PersonStaff=new Pman.Tab.PersonList({id:"personstaff",type:1,permName:"Core.Staff",getLeftSelections:function(){return Pman.Tab.Teams.grid?Pman.Tab.Teams.grid.getSelectionModel().getSelections():[];
},beforeload:function(t,o){var A=this.getLeftSelections();if(A.length){o.params["query[in_group]"]=A[0].data.id;}o.params["query[name]"]=this.searchBox.getValue();o.params["query[type]"]=this.type;o.params["query[person_internal_only_all]"]=1;o.params["query[person_inactive]"]=this.showInActive?0:1;
},columns:function(){return [this.c_name(),this.c_office_id_name(),this.c_role(),this.c_phone(),this.c_fax(),this.c_email(),this.c_active()]},dialog:function(){return Pman.Dialog.PersonStaff;},bulkAdd:function(){return false;},newDefaults:function(){return {id:0,company_id:Pman.Login.authUser.company_id,company_id_name:Pman.Login.authUser.company_id_name,company_id_address:Pman.Login.authUser.company_id_address,company_id_tel:Pman.Login.authUser.company_id_tel,company_id_fax:Pman.Login.authUser.company_id_fax};
}});
Pman.on("beforeload",function(){Pman.register({modKey:"002-pman-tab-groups-rights",module:Pman.Tab.Group_Rights,region:"center",parent:Pman.Tab.GroupMgr,name:_T["55fc11c5ead376d75fe79969a2c826c5"]});});Pman.ColModels.Group_RightsRenderer=function(v,c,r,ri,ci,st){var h=Pman.Tab.Group_Rights.grid.getColumnModel().getColumnId(ci).toUpperCase();
var fm=r.json.FullMask;state="";if(h=="AA"){state=v==fm?"-checked":"";}else if(v.indexOf(h.substring(3))>-1){state="-checked";}if(fm.indexOf(h.substring(3))<0){return "";}return "<img class=\"x-grid-check-icon"+state+"\" src=\""+Ext.BLANK_IMAGE_URL+"\"/>";
};Pman.Tab.Group_Rights={rightNames:{},grid:false,panel:false,add:function(F,D){if(this.panel){F.getRegion(D).showPanel(this.panel);return;}var C=this;var A=F.getRegion(D).getEl().createChild({tag:"div",id:"grid-group_rights"});this.grid=new Ext.grid.Grid(A,{ds:new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:baseURL+"/Admin/GroupRights.php",method:"GET"}),reader:Pman.Readers.Group_Rights,remoteSort:false,listeners:{beforeload:function(t,o){if(!o.params){o.params={}}var s=Pman.Tab.Groups.grid.getSelectionModel().getSelections();
if(!s.length){o.params.group_id=-1;}else{o.params.group_id=s[0].data.id;}if(o.params.group_id<0){C.grid.getView().el.mask(_T["c2df49acf6bc67c764118d525d6ab7c2"]);return false;}C.grid.getView().el.unmask();return true;},loadexception:Pman.loadException}}),selModel:new Ext.grid.CellSelectionModel(),cm:new Ext.grid.ColumnModel([{"id":"aa",header:_T["60d933dfa7753ecb66c14d62d64dc91a"],dataIndex:"AccessMask",sortable:false,width:50,renderer:Pman.ColModels.Group_RightsRenderer},{"id":"group_rights-rightname",header:_T["06a52628ddc9ff79dce87c94b0f9d931"],dataIndex:"rightname",sortable:false,width:300,renderer:function(v,x,r){if(r.json.descript&&r.json.descript.length){return String.format("{0}",r.json.descript);
}switch(v){case "Documents.Document_Manager":return _T["9efb8a28d8020256496b0373a150881f"];case "Documents.Documents":return _T["77a76222cc0c1da727ff6a327e880b6d"];case "Documents.Unread_Documents":return _T["d481fb9cc897bfde3f7d9d4b3f7ac653"];case "Documents.Distribute_Documents":return _T["504a6ec27d97facab115d15d4fd40675"];
case "Documents.Work_In_Progress":return _T["541e3bc900a640c3cb86027ca2aea691"];case "Documents.Project_Directory":return _T["96d64c29469febba0e69f066f3fa5cad"];case "Fax.Fax":return _T["27676b11ab383213a3b854fd5ae8c169"];case "Fax.Fax_To_Company":return _T["a8158b4933ffde3322bdd34411bac480"];
case "Timesheet.Timesheet":return _T["097fc1f523b6ddd8a0763b5f841b173e"];case "Admin.Admin_Tab":return _T["2ddc69dbb3bb3180c86d238e4e43044d"];case "Core.Person":return _T["2be9b95e4897f569988d1da2c3c696e8"];case "Core.Offices":return _T["51a1afb021b662d94c99e75b3fd6dae3"];
case "Core.Companies":return _T["0404d4821b03a48193b6189238410506"];case "Core.Staff":return _T["da7f39a9b5ca989a11c50819b0e11a8c"];case "Core.Groups":return _T["a374d5906bdb8bc352e514774bae00a5"];case "Core.Events":return _T["fa8d63966a54ea2f37fdb2f57014079b"];
default:if(typeof (Pman.rightNames[v])=="string"&&Pman.rightNames[v].length){return String.format("{0}",Pman.rightNames[v]);}return "???"+v;}}},{"id":"am-a",header:_T["469997edd419d96959754b6c5836bb1f"],dataIndex:"AccessMask",width:50,sortable:false,renderer:Pman.ColModels.Group_RightsRenderer},{"id":"am-e",header:_T["06ec80b73375bae5dc4310bb3b74a2c7"],dataIndex:"AccessMask",width:50,sortable:false,renderer:Pman.ColModels.Group_RightsRenderer},{"id":"am-d",header:_T["9420ef6833779757d6d478400f999f31"],dataIndex:"AccessMask",width:50,sortable:false,renderer:Pman.ColModels.Group_RightsRenderer},{"id":"am-s",header:_T["91a7a956228674052e355ee7578d86d4"],dataIndex:"AccessMask",width:90,sortable:false,renderer:Pman.ColModels.Group_RightsRenderer},{"id":"am-p",header:_T["71d64cf7a0239fc8c37f808911d5cb37"],dataIndex:"AccessMask",width:100,sortable:false,renderer:Pman.ColModels.Group_RightsRenderer},{"id":"group_rights-remarks",header:"",dataIndex:"Remarks",sortable:false,width:50}]),autoExpandColumn:"group_rights-remarks",clicksToEdit:1,loadMask:true,trackMouseOver:false,listeners:{cellclick:function(g,ri,ci,e){var h=g.getColumnModel().getColumnId(ci);
var fm=g.getDataSource().getAt(ri).json.FullMask;if(h.substring(0,2)=="aa"){var G=g.getDataSource().getAt(ri).data.AccessMask;g.getDataSource().getAt(ri).set("AccessMask",G==fm?_T["5e246909a49d67371a5fdc0ebca2eb74"]:fm);return;}if(h.substring(0,2)!="am"){return;
}var c=h.substring(3).toUpperCase();if(fm.indexOf(c)<0){return;}function I(L){var K={};for(var i=0;i<fm.length;i++){var cc=fm.substring(i,i+1);K[cc]=L.indexOf(cc)>-1;}return K;}function J(K){var L="";for(var i=0;i<fm.length;i++){var cc=fm.substring(i,i+1);
if(K[cc]){L+=cc;}}return L;}var H=I(g.getDataSource().getAt(ri).data.AccessMask);H[c]=!H[c];g.getDataSource().getAt(ri).set("AccessMask",J(H));}}});this.grid.getSelectionModel().lock();this.panel=F.add(D,new Ext.GridPanel(this.grid,{fitToframe:true,fitContainer:true,title:_T["4bb1807156a2dad4663604173f607e86"],id:"group_rights",controller:this}));
this.grid.render();var B=this.grid;var E=this.grid.getView().getHeaderPanel(true);var tb=new Ext.Toolbar(E);tb.add({text:_T["c12cd5233ac730fc7f0129d4d0cdad1c"],cls:"x-btn-text-icon",icon:rootURL+"/Pman/templates/images/save.gif",hidden:!Pman.hasPerm("Core.Groups","E"),handler:function(){var G={};
B.getDataSource().each(function(r){if(!r.dirty){return;}G[r.data.id>-1?"dataUpdate["+r.data.id+"]":"dataAdd["+r.data.rightname+"]"]=r.data.AccessMask;});G.group_id=B.getDataSource().lastOptions.params.group_id;Ext.Ajax.request({url:baseURL+"/Admin/GroupRights.php",params:G,method:"POST",success:function(){C.refresh();
},failure:function(){Ext.MessageBox.alert(_T["b5c0fe8dd8c6d39aef5041ad32a98090"]);}});}},"-",{text:_T["5469b404166eeda9825a4843504910da"],cls:"x-btn-text-icon",icon:rootURL+"/Pman/templates/images/refresh.gif",handler:function(){C.refresh();}});this.panel.on("activate",function(){C.refresh();
});},refresh:function(){this.grid.getDataSource().reload();},renderer:function(v,c,r,ri,ci,st){var h=Pman.Tab.Group_Rights.grid.getColumnModel().getColumnId(ci).toUpperCase();if(v.indexOf(h.substring(3))>-1){return "Y";}return "-";},save:function(){}};
Pman.on("beforeload",function(){Pman.register({modKey:"001-pman-tab-groups-members",module:Pman.Tab.Group_Members,region:"center",parent:Pman.Tab.GroupMgr,name:_T["6aee775a74f303c87e97a419fb5b65ea"]});});Pman.Tab.Group_Members=new Pman.Tab.PersonList({id:"group_members",type:0,title:_T["030108316dbe80f3bb3bd39a26841a4e"],hideDelete:true,getLeftSelections:function(){return Pman.Tab.Groups.grid.getSelectionModel().getSelections();
},beforeload:function(t,o){var A=this.getLeftSelections();if(A.length){o.params["query[in_group]"]=A[0].data.id;}o.params["query[name]"]=this.searchBox.getValue();o.params["query[type]"]=this.type;o.params["query[person_internal_only_all]"]=1;o.params["query[person_inactive]"]=this.showInActive?0:1;
},columns:function(){return [this.c_name(),this.c_office_id_name(),this.c_role(),this.c_phone(),this.c_fax(),this.c_email(),this.c_active()]},dialog:function(){return Pman.Dialog.PersonStaff;},bulkAdd:function(){return false;},newDefaults:function(){return {id:0,company_id:Pman.Login.authUser.company_id,company_id_name:Pman.Login.authUser.company_id_name,company_id_address:Pman.Login.authUser.company_id_address,company_id_tel:Pman.Login.authUser.company_id_tel,company_id_fax:Pman.Login.authUser.company_id_fax};
}});
Pman.on("beforeload",function(){if(Pman.Login.authUser.company_id_comptype!="OWNER"){return;}if(!Pman.hasPerm("Core.Projects_All","S")){return;}Pman.register({modKey:"010-pman_tab_adminprojects",module:Pman.Tab.AdminProjects,region:"center",parent:Pman.Tab.Admin,name:_T["2fd9324fe11c112090e216c588b1ce2e"]});
});Pman.Tab.AdminProjects={panel:false,disabled:false,parentLayout:false,add:function(C,B){if(this.disabled){return;}var A=this;this.parentLayout=C;this.panel=this.parentLayout.addxtype({xtype:"GridPanel",title:_T["f6437120f077a24232be600cea646ec1"],fitToframe:true,fitContainer:true,tableName:"Projects",background:true,listeners:{activate:function(){A.panel=this;
if(A.grid&&A.grid.rendered){A.grid.footer.onClick("first");}}},grid:{xtype:"Grid",autoExpandColumn:"remarks",loadMask:true,listeners:{render:function(){A.grid=this;A.dialog=Pman.Dialog.Projects;A.filter="P,U";A.getTypes=function(){return [["U",_T["af28d3518a6766751b3919d79c405dd1"]],["P",_T["bdf15682d085d16c96ee0691a12093fe"]],["C",_T["0f04e5f053394b0c0f0c8c7a59c67a44"]],["N",_T["5707676d5fcba13248788c5ead856c7a"]],["X",_T["7b5b05c6f68ff37d71ebd54016374cd4"]]];
};A.typeToString=function(v){var ar=this.getTypes();var D="";Roo.each(ar,function(a){if(a[0]==v){D=a[1];return false;}});return D;};A.grid.footer.onClick("first");},rowdblclick:function(g,ri,e){A.dialog.show(g.getDataSource().getAt(ri).data,function(){_self.footer.onClick("refresh");
});}},dataSource:{xtype:"Store",reader:Pman.Readers.Projects,listeners:{beforeload:function(D,o){if(!A.searchBox){return false;}o.params=o.params?o.params:{};o.params["query[project_search]"]=A.searchBox.getValue();o.params["query[project_filter]"]=A.filter;
}},sortInfo:{field:"code",direction:"DESC"},remoteSort:true,proxy:{xtype:"HttpProxy",method:"GET",url:baseURL+"/Roo/Projects.php"}},colModel:[{header:"Type",width:70,dataIndex:"type",renderer:function(v){return A.typeToString(v);}},{header:"Code",width:90,dataIndex:"code",renderer:function(v){return String.format("{0}",v);
}},{header:"Project Name",width:300,dataIndex:"name",renderer:function(v){return String.format("{0}",v);}},{header:"Client ",width:100,dataIndex:"client_id_name",renderer:function(v){return String.format("{0}",v);}},{header:"Remarks",width:300,dataIndex:"remarks",renderer:function(v){return String.format("{0}",v);
}}],footer:{xtype:"PagingToolbar",pageSize:25,displayInfo:true,displayMsg:_T["680089b0ca930a79f1b605e9962c523c"],emptyMsg:_T["a416145f09384cea45e24d3da8321900"]},toolbar:{xtype:"Toolbar",items:[{text:_T["bc286832507396098fb722f0044c19fa"],xtype:"Button",cls:"x-btn-text-icon",icon:Roo.rootURL+"images/default/dd/drop-add.gif",listeners:{click:function(){A.dialog.show({id:0},function(){A.grid.footer.onClick("first");
});}}},{text:_T["442a6817e8f99102370b535fa55d2d05"],xtype:"Button",cls:"x-btn-text-icon",icon:Roo.rootURL+"images/default/tree/leaf.gif",listeners:{click:function(){var s=A.grid.getSelectionModel().getSelections();if(!s.length||(s.length>1)){Roo.MessageBox.alert(_T["ce80b3a191db7f941f320dea440b47b0"],s.length?_T["a0c74aadfcf9b556a76ebc1d0142f560"]:_T["0e9c16fe133240e390334f702776a673"]);
return;}A.dialog.show(s[0].data,function(){A.grid.footer.onClick("first");});}}},{xtype:"Separator",xns:Roo.Toolbar},{xtype:"TextItem",xns:Roo.Toolbar,text:_T["abd8c39761eb10b00ad61ce418ff6504"]},{xtype:"TextField",xns:Roo.form,listeners:{render:function(D){A.searchBox=D;
},specialkey:function(D,e){if(e.getKey()==13){A.grid.footer.onClick("first");}}},width:135},{xtype:"Button",xns:Roo.Toolbar,listeners:{click:function(D,e){A.grid.footer.onClick("first");}},icon:rootURL+"/Pman/templates/images/search.gif",cls:"x-btn-icon"},{xtype:"Button",xns:Roo.Toolbar,listeners:{click:function(D,e){A.searchBox.setValue("");
A.grid.footer.onClick("first");}},icon:rootURL+"/Pman/templates/images/edit-clear.gif",cls:"x-btn-icon"},{xtype:"Separator",xns:Roo.Toolbar},{xtype:"TextItem",xns:Roo.Toolbar,text:_T["2cc3dce41de8c75237e0ada619eed78d"]},{xtype:"Button",xns:Roo.Toolbar,text:_T["471a89fceb6e624e6ccbae3921eedee1"],listeners:{toggle:function(D,st){if(st){A.filter="P,N,U";
}A.grid.footer.onClick("first");}},toggleGroup:"pgrp",pressed:false,enableToggle:true},{xtype:"Button",xns:Roo.Toolbar,text:_T["f6437120f077a24232be600cea646ec1"],listeners:{toggle:function(D,st){if(st){A.filter="P,U";}A.grid.footer.onClick("first");}},toggleGroup:"pgrp",pressed:true,enableToggle:true},{xtype:"Button",xns:Roo.Toolbar,text:_T["08122fd86306d97ace5e61fdbdab612a"],listeners:{toggle:function(D,st){if(st){A.filter="N";
}A.grid.footer.onClick("first");}},toggleGroup:"pgrp",pressed:false,enableToggle:true},{xtype:"Button",xns:Roo.Toolbar,text:_T["c9af45ef2226a5c486f868634f557ca4"],listeners:{toggle:function(D,st){if(st){A.filter="X,C";}A.grid.footer.onClick("first");}},toggleGroup:"pgrp",pressed:false,enableToggle:true}]},selModel:{xtype:"RowSelectionModel",xns:Roo.grid,singleSelect:true}},region:"center"});
}};
Pman.on("beforeload",function(){Pman.register({modKey:"000-pman_tab_adminlogevents",module:Pman.Tab.AdminLogEvents,region:"center",parent:Pman.Tab.AdminLogs,name:_T["53510339347f1ff64b52c8c3747c0cd3"]});});Pman.Tab.AdminLogEvents={panel:false,disabled:false,parentLayout:false,add:function(C,B){if(this.disabled){return;
}var A=this;this.parentLayout=C;this.panel=this.parentLayout.addxtype({xtype:"GridPanel",title:_T["0d38c3fb4c8500c67d01990bba2cf569"],fitToframe:true,fitContainer:true,tableName:"Events",background:true,listeners:{activate:function(){A.panel=this;if(A.grid){A.grid.footer.onClick("first");
}}},grid:{xtype:"Grid",autoExpandColumn:"remarks",loadMask:true,listeners:{render:function(){A.grid=this;if(A.panel.active){this.footer.onClick("first");}}},dataSource:{xtype:"Store",reader:Pman.Readers.Events,listeners:{beforeload:function(D,o){if(!A.personSel){return;
}o.params=o.params||{};o.params.person_id=A.personSel.getValue();}},remoteSort:true,sortInfo:{field:"event_when",direction:"DESC"},proxy:{xtype:"HttpProxy",method:"GET",url:baseURL+"/Roo/Events.php"}},colModel:[{header:"When",width:100,dataIndex:"event_when",renderer:function(v){return v?v.dateFormat("d/m/Y H:i"):"";
}},{header:"Staff",width:150,dataIndex:"person_name",renderer:function(v){return String.format("{0}",v);}},{header:"Action",width:100,dataIndex:"action",renderer:function(v){return String.format("{0}",v);}},{header:"IP",width:100,dataIndex:"ipaddr",renderer:function(v){return String.format("{0}",v);
}},{header:"Affected",width:100,dataIndex:"on_id",renderer:function(v,x,r){return v?String.format("{0}({1})",r.data.on_table,v):"";}},{header:"Remarks",width:300,dataIndex:"remarks",renderer:function(v){return String.format("{0}",v);}}],footer:{xtype:"PagingToolbar",pageSize:25,displayInfo:true,displayMsg:_T["2ff0fe02cb998d6c2953ae2d68ca6ea4"],emptyMsg:_T["9a0575c139cbae13541dff297791a7d8"]},toolbar:{xtype:"Toolbar",items:[{xtype:"TextItem",xns:Roo.Toolbar,text:_T["b6ae8269eb074050cf22d7199051a157"]},{fieldLabel:_T["a9dbe313b1e0082050bda7ce5fc93f7e"],name:"person_id_name",qtip:_T["b827dddadd3ebfc23104551ee6a3a6f9"],emptyText:_T["b827dddadd3ebfc23104551ee6a3a6f9"],xtype:"ComboBox",selectOnFocus:true,allowBlank:true,width:150,listWidth:400,editable:false,displayField:"name",valueField:"id",typeAhead:true,forceSelection:true,triggerAction:"all",tpl:"<div class=\"x-grid-cell-text x-btn button\"><b>{name}</b> </div>",queryParam:"query[name]",loadingText:_T["d2489c8b4febecb80a1c387c1431696c"],minChars:2,pageSize:20,listeners:{select:function(D,F,E){A.grid.footer.onClick("first");
},render:function(D){A.personSel=D;}},store:{xtype:"Store",reader:Pman.Readers.Person,listeners:{beforeload:function(D,o){o.params=o.params||{};o.company_id=Pman.Login.authUser.company_id;}},proxy:{xtype:"HttpProxy",url:baseURL+"/Roo/Person.php",method:"GET"}}}]}},region:"center"});
}};
Pman.on("beforeload",function(){Pman.Dialog.PersonBulkAdd=new Pman.Dialog.PersonEditor({type:"new",dialogConfig:{title:_T["001969a043caf8ee9c27978405c14cf2"],height:350},itemList:["company_id_name","office_id_name","bulklist","id","active"]});});
Pman.on("beforeload",function(){var A=false;if(A){return;}Pman.register({modKey:"999-pman_tab_admintranslations",module:Pman.Tab.AdminTranslations,region:"center",parent:Pman.Tab.Admin,name:_T["13e4f84d09a2d4057fdee709efdcca61"]});});Pman.Tab.AdminTranslations=new Roo.util.Observable({panel:false,disabled:false,parentLayout:false,add:function(C,B){var A=this;
this.parentLayout=C;this.panel=C.addxtype({xtype:"GridPanel",title:_T["f721d54a743cf7f401af0579e7524d23"],fitToframe:true,fitContainer:true,background:true,listeners:{activate:function(){A.panel=this;if(A.grid){A.grid.getDataSource().reload();}}},grid:{xtype:"EditorGrid",autoExpandColumn:"txt",loadMask:true,listeners:{render:function(){A.grid=this;
if(A.panel.active){A.grid.getDataSource().reload();}},beforeedit:function(e){console.log("beforeedit");if(e.record.get("txt").replace(/\s+/,"").length){return true;}if(e.record.get("suggest").length){e.record.set("txt",e.record.get("suggest"));return;}var tl=e.record.get("id").split("/")[0];
tl=(tl=="zh_HK")?"zh-TW":tl;tl=tl.replace("_","-");var D=e.record;Pman.gtranslate(e.record.get("origtxt"),"en",tl,function(E){if(typeof (E)=="object"){return;}if(A.grid.activeEditor){A.grid.activeEditor.setValue(E);}else{D.set("txt",E);}});return true;},afteredit:function(e){var D=function(E){var g=A.grid;
Ext.Ajax.request({url:baseURL+"/Admin/Translations.php",method:"POST",params:{id:E.get("id"),txt:E.get("txt"),lang:A.langCombo.getValue(),module:A.modCombo.getValue()},success:function(){},failure:function(){Ext.Msg.alert(_T["cc3c9c34f380feb1c3d59fc9ade606eb"],_T["809badd958a9c1ea39a77cc940810dde"]);
}});};D.defer(1000,A,[e.record]);}},clicksToEdit:1,xns:Roo.Grid,dataSource:{xtype:"Store",reader:Pman.Readers.Category,listeners:{beforeload:function(E,D){if(!A.langCombo||!A.langCombo.getValue().length){return false;}if(!A.modCombo||!A.modCombo.getValue().length){return false;
}D.params={lang:A.langCombo.getValue(),module:A.modCombo.getValue()};}},proxy:{xtype:"HttpProxy",method:"GET",url:baseURL+"/Admin/Translations.php"},reader:{xtype:"JsonReader",xns:Roo.data,root:"data",totalProperty:"total",id:"id",fields:["id","tablename","tableid","colname","txt","lang",{name:"updated",type:"date",dateFormat:"Y-m-d H:i:s"},{name:"origupdated",type:"date",dateFormat:"Y-m-d H:i:s"},"origtxt","msum","suggest"]}},colModel:[{header:"Name",width:150,dataIndex:"colname",renderer:function(v,x,r){var c="#666";
if(r.get("updated")<r.get("origupdated")){c="red";}return "<div style=\"color:"+c+"\";>"+r.get("tableid")+":"+v+"</div>";}},{header:"Original",width:300,dataIndex:"origtxt",renderer:function(v,x,r){var c="#666";if(r.get("updated")<r.get("origupdated")){c="red";
}return "<div style=\"color:"+c+"\">"+Ext.util.Format.htmlEncode(v)+"</div>";}},{header:"Translated (Click to Edit)",width:150,dataIndex:"txt",renderer:function(v,x,r){var c="#666";if(r.get("updated")<r.get("origupdated")){c="red";}return "<div style=\"color:"+c+"\">"+Ext.util.Format.htmlEncode(v)+"</div>";
},editor:{xtype:"GridEditor",xns:Roo.grid,field:{xtype:"TextField",xns:Roo.form}}}],toolbar:{xtype:"Toolbar",items:[{xtype:"ComboBox",listeners:{render:function(D){A.modCombo=D;},select:function(D,F,E){A.grid.getDataSource().reload();}},valueField:"module",displayField:"module",width:200,typeAhead:false,editable:false,mode:"local",triggerAction:"all",emptyText:_T["7dc4f8fc44cbe1bbe1d99a2d7bac22d4"],selectOnFocus:true,store:{xtype:"SimpleStore",xns:Roo.data,fields:["module"],data:(function(){var D=[];
Roo.each(AppModules.split(","),function(E){D.push([E]);});return D;})()}},{xtype:"ComboBox",listeners:{select:function(D,F,E){A.grid.getDataSource().reload();},render:function(D){A.langCombo=D;}},valueField:"lang",displayField:"ldisp",width:200,typeAhead:false,editable:false,mode:"local",triggerAction:"all",emptyText:_T["69cea9ae503551d985aced167bb01c62"],selectOnFocus:true,store:{xtype:"SimpleStore",xns:Roo.data,fields:["lang","ldisp"],data:[["zh_HK"," - Trad. Chin. (HK)"],["zh_CN"," - Simp. Chin."]]}}]}},region:"center"});
}});
